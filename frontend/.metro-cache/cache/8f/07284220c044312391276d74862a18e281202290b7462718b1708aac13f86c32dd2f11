{"dependencies":[{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":24,"index":24}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":25},"end":{"line":2,"column":69,"index":94}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _api = require(_dependencyMap[0], \"./api\");\n  var api = _interopDefault(_api);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  class AuthService {\n    async login(data, stayLoggedIn = true) {\n      try {\n        console.log('[AuthService] Attempting login for:', data.email);\n        console.log('[AuthService] API Base URL:', api.default.defaults.baseURL);\n        const response = await api.default.post('/auth/login', data);\n        const {\n          session_token,\n          user\n        } = response.data;\n        console.log('[AuthService] Login successful');\n\n        // Always store the token and user data\n        await AsyncStorage.default.setItem('session_token', session_token);\n        await AsyncStorage.default.setItem('user_data', JSON.stringify(user));\n\n        // Store the preference for staying logged in\n        await AsyncStorage.default.setItem('stay_logged_in', JSON.stringify(stayLoggedIn));\n        return {\n          token: session_token,\n          user\n        };\n      } catch (error) {\n        console.error('[AuthService] Login failed:', error.message);\n        console.error('[AuthService] Error response:', error.response?.data);\n        console.error('[AuthService] Error status:', error.response?.status);\n        console.error('[AuthService] Full error:', error);\n        throw error;\n      }\n    }\n    async register(data) {\n      const response = await api.default.post('/auth/register', data);\n      const {\n        session_token,\n        user\n      } = response.data;\n      await AsyncStorage.default.setItem('session_token', session_token);\n      await AsyncStorage.default.setItem('user_data', JSON.stringify(user));\n      return {\n        token: session_token,\n        user\n      };\n    }\n    async logout() {\n      // Clear local storage (backend doesn't need logout endpoint for JWT)\n      await AsyncStorage.default.removeItem('session_token');\n      await AsyncStorage.default.removeItem('user_data');\n    }\n    async getCurrentUser() {\n      try {\n        const response = await api.default.get('/auth/me');\n        return response.data;\n      } catch (error) {\n        return null;\n      }\n    }\n    async getStoredUser() {\n      const userData = await AsyncStorage.default.getItem('user_data');\n      return userData ? JSON.parse(userData) : null;\n    }\n    async getToken() {\n      return await AsyncStorage.default.getItem('session_token');\n    }\n  }\n  var _default = new AuthService();\n});","lineCount":87,"map":[[12,2,92,0,"Object"],[12,8,92,0],[12,9,92,0,"defineProperty"],[12,23,92,0],[12,24,92,0,"exports"],[12,31,92,0],[13,4,92,0,"enumerable"],[13,14,92,0],[14,4,92,0,"get"],[14,7,92,0],[14,18,92,0,"get"],[14,19,92,0],[15,6,92,0],[15,13,92,0,"_default"],[15,21,92,0],[16,4,92,0],[17,2,92,0],[18,2,1,0],[18,6,1,0,"_api"],[18,10,1,0],[18,13,1,0,"require"],[18,20,1,0],[18,21,1,0,"_dependencyMap"],[18,35,1,0],[19,2,1,0],[19,6,1,0,"api"],[19,9,1,0],[19,12,1,0,"_interopDefault"],[19,27,1,0],[19,28,1,0,"_api"],[19,32,1,0],[20,2,2,0],[20,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,42,2,0],[20,45,2,0,"require"],[20,52,2,0],[20,53,2,0,"_dependencyMap"],[20,67,2,0],[21,2,2,0],[21,6,2,0,"AsyncStorage"],[21,18,2,0],[21,21,2,0,"_interopDefault"],[21,36,2,0],[21,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[21,73,2,0],[22,2,29,0],[22,8,29,6,"AuthService"],[22,19,29,17],[22,20,29,18],[23,4,30,2],[23,10,30,8,"login"],[23,15,30,13,"login"],[23,16,30,14,"data"],[23,20,30,29],[23,22,30,31,"stayLoggedIn"],[23,34,30,52],[23,37,30,55],[23,41,30,59],[23,43,30,101],[24,6,31,4],[24,10,31,8],[25,8,32,6,"console"],[25,15,32,13],[25,16,32,14,"log"],[25,19,32,17],[25,20,32,18],[25,57,32,55],[25,59,32,57,"data"],[25,63,32,61],[25,64,32,62,"email"],[25,69,32,67],[25,70,32,68],[26,8,33,6,"console"],[26,15,33,13],[26,16,33,14,"log"],[26,19,33,17],[26,20,33,18],[26,49,33,47],[26,51,33,49,"api"],[26,54,33,52],[26,55,33,52,"default"],[26,62,33,52],[26,63,33,53,"defaults"],[26,71,33,61],[26,72,33,62,"baseURL"],[26,79,33,69],[26,80,33,70],[27,8,35,6],[27,14,35,12,"response"],[27,22,35,20],[27,25,35,23],[27,31,35,29,"api"],[27,34,35,32],[27,35,35,32,"default"],[27,42,35,32],[27,43,35,33,"post"],[27,47,35,37],[27,48,35,38],[27,61,35,51],[27,63,35,53,"data"],[27,67,35,57],[27,68,35,58],[28,8,36,6],[28,14,36,12],[29,10,36,14,"session_token"],[29,23,36,27],[30,10,36,29,"user"],[31,8,36,34],[31,9,36,35],[31,12,36,38,"response"],[31,20,36,46],[31,21,36,47,"data"],[31,25,36,51],[32,8,38,6,"console"],[32,15,38,13],[32,16,38,14,"log"],[32,19,38,17],[32,20,38,18],[32,52,38,50],[32,53,38,51],[34,8,40,6],[35,8,41,6],[35,14,41,12,"AsyncStorage"],[35,26,41,24],[35,27,41,24,"default"],[35,34,41,24],[35,35,41,25,"setItem"],[35,42,41,32],[35,43,41,33],[35,58,41,48],[35,60,41,50,"session_token"],[35,73,41,63],[35,74,41,64],[36,8,42,6],[36,14,42,12,"AsyncStorage"],[36,26,42,24],[36,27,42,24,"default"],[36,34,42,24],[36,35,42,25,"setItem"],[36,42,42,32],[36,43,42,33],[36,54,42,44],[36,56,42,46,"JSON"],[36,60,42,50],[36,61,42,51,"stringify"],[36,70,42,60],[36,71,42,61,"user"],[36,75,42,65],[36,76,42,66],[36,77,42,67],[38,8,44,6],[39,8,45,6],[39,14,45,12,"AsyncStorage"],[39,26,45,24],[39,27,45,24,"default"],[39,34,45,24],[39,35,45,25,"setItem"],[39,42,45,32],[39,43,45,33],[39,59,45,49],[39,61,45,51,"JSON"],[39,65,45,55],[39,66,45,56,"stringify"],[39,75,45,65],[39,76,45,66,"stayLoggedIn"],[39,88,45,78],[39,89,45,79],[39,90,45,80],[40,8,47,6],[40,15,47,13],[41,10,47,15,"token"],[41,15,47,20],[41,17,47,22,"session_token"],[41,30,47,35],[42,10,47,37,"user"],[43,8,47,42],[43,9,47,43],[44,6,48,4],[44,7,48,5],[44,8,48,6],[44,15,48,13,"error"],[44,20,48,23],[44,22,48,25],[45,8,49,6,"console"],[45,15,49,13],[45,16,49,14,"error"],[45,21,49,19],[45,22,49,20],[45,51,49,49],[45,53,49,51,"error"],[45,58,49,56],[45,59,49,57,"message"],[45,66,49,64],[45,67,49,65],[46,8,50,6,"console"],[46,15,50,13],[46,16,50,14,"error"],[46,21,50,19],[46,22,50,20],[46,53,50,51],[46,55,50,53,"error"],[46,60,50,58],[46,61,50,59,"response"],[46,69,50,67],[46,71,50,69,"data"],[46,75,50,73],[46,76,50,74],[47,8,51,6,"console"],[47,15,51,13],[47,16,51,14,"error"],[47,21,51,19],[47,22,51,20],[47,51,51,49],[47,53,51,51,"error"],[47,58,51,56],[47,59,51,57,"response"],[47,67,51,65],[47,69,51,67,"status"],[47,75,51,73],[47,76,51,74],[48,8,52,6,"console"],[48,15,52,13],[48,16,52,14,"error"],[48,21,52,19],[48,22,52,20],[48,49,52,47],[48,51,52,49,"error"],[48,56,52,54],[48,57,52,55],[49,8,53,6],[49,14,53,12,"error"],[49,19,53,17],[50,6,54,4],[51,4,55,2],[52,4,57,2],[52,10,57,8,"register"],[52,18,57,16,"register"],[52,19,57,17,"data"],[52,23,57,35],[52,25,57,77],[53,6,58,4],[53,12,58,10,"response"],[53,20,58,18],[53,23,58,21],[53,29,58,27,"api"],[53,32,58,30],[53,33,58,30,"default"],[53,40,58,30],[53,41,58,31,"post"],[53,45,58,35],[53,46,58,36],[53,62,58,52],[53,64,58,54,"data"],[53,68,58,58],[53,69,58,59],[54,6,59,4],[54,12,59,10],[55,8,59,12,"session_token"],[55,21,59,25],[56,8,59,27,"user"],[57,6,59,32],[57,7,59,33],[57,10,59,36,"response"],[57,18,59,44],[57,19,59,45,"data"],[57,23,59,49],[58,6,61,4],[58,12,61,10,"AsyncStorage"],[58,24,61,22],[58,25,61,22,"default"],[58,32,61,22],[58,33,61,23,"setItem"],[58,40,61,30],[58,41,61,31],[58,56,61,46],[58,58,61,48,"session_token"],[58,71,61,61],[58,72,61,62],[59,6,62,4],[59,12,62,10,"AsyncStorage"],[59,24,62,22],[59,25,62,22,"default"],[59,32,62,22],[59,33,62,23,"setItem"],[59,40,62,30],[59,41,62,31],[59,52,62,42],[59,54,62,44,"JSON"],[59,58,62,48],[59,59,62,49,"stringify"],[59,68,62,58],[59,69,62,59,"user"],[59,73,62,63],[59,74,62,64],[59,75,62,65],[60,6,64,4],[60,13,64,11],[61,8,64,13,"token"],[61,13,64,18],[61,15,64,20,"session_token"],[61,28,64,33],[62,8,64,35,"user"],[63,6,64,40],[63,7,64,41],[64,4,65,2],[65,4,67,2],[65,10,67,8,"logout"],[65,16,67,14,"logout"],[65,17,67,14],[65,19,67,32],[66,6,68,4],[67,6,69,4],[67,12,69,10,"AsyncStorage"],[67,24,69,22],[67,25,69,22,"default"],[67,32,69,22],[67,33,69,23,"removeItem"],[67,43,69,33],[67,44,69,34],[67,59,69,49],[67,60,69,50],[68,6,70,4],[68,12,70,10,"AsyncStorage"],[68,24,70,22],[68,25,70,22,"default"],[68,32,70,22],[68,33,70,23,"removeItem"],[68,43,70,33],[68,44,70,34],[68,55,70,45],[68,56,70,46],[69,4,71,2],[70,4,73,2],[70,10,73,8,"getCurrentUser"],[70,24,73,22,"getCurrentUser"],[70,25,73,22],[70,27,73,47],[71,6,74,4],[71,10,74,8],[72,8,75,6],[72,14,75,12,"response"],[72,22,75,20],[72,25,75,23],[72,31,75,29,"api"],[72,34,75,32],[72,35,75,32,"default"],[72,42,75,32],[72,43,75,33,"get"],[72,46,75,36],[72,47,75,37],[72,57,75,47],[72,58,75,48],[73,8,76,6],[73,15,76,13,"response"],[73,23,76,21],[73,24,76,22,"data"],[73,28,76,26],[74,6,77,4],[74,7,77,5],[74,8,77,6],[74,15,77,13,"error"],[74,20,77,18],[74,22,77,20],[75,8,78,6],[75,15,78,13],[75,19,78,17],[76,6,79,4],[77,4,80,2],[78,4,82,2],[78,10,82,8,"getStoredUser"],[78,23,82,21,"getStoredUser"],[78,24,82,21],[78,26,82,46],[79,6,83,4],[79,12,83,10,"userData"],[79,20,83,18],[79,23,83,21],[79,29,83,27,"AsyncStorage"],[79,41,83,39],[79,42,83,39,"default"],[79,49,83,39],[79,50,83,40,"getItem"],[79,57,83,47],[79,58,83,48],[79,69,83,59],[79,70,83,60],[80,6,84,4],[80,13,84,11,"userData"],[80,21,84,19],[80,24,84,22,"JSON"],[80,28,84,26],[80,29,84,27,"parse"],[80,34,84,32],[80,35,84,33,"userData"],[80,43,84,41],[80,44,84,42],[80,47,84,45],[80,51,84,49],[81,4,85,2],[82,4,87,2],[82,10,87,8,"getToken"],[82,18,87,16,"getToken"],[82,19,87,16],[82,21,87,43],[83,6,88,4],[83,13,88,11],[83,19,88,17,"AsyncStorage"],[83,31,88,29],[83,32,88,29,"default"],[83,39,88,29],[83,40,88,30,"getItem"],[83,47,88,37],[83,48,88,38],[83,63,88,53],[83,64,88,54],[84,4,89,2],[85,2,90,0],[86,2,92,0],[86,6,92,0,"_default"],[86,14,92,0],[86,17,92,15],[86,21,92,19,"AuthService"],[86,32,92,30],[86,33,92,31],[86,34,92,32],[87,0,92,33],[87,3]],"functionMap":{"names":["<global>","AuthService","AuthService#login","AuthService#register","AuthService#logout","AuthService#getCurrentUser","AuthService#getStoredUser","AuthService#getToken"],"mappings":"AAA;AC4B;ECC;GDyB;EEE;GFQ;EGE;GHI;EIE;GJO;EKE;GLG;EME;GNE;CDC"},"hasCjsExports":false},"type":"js/module"}]}