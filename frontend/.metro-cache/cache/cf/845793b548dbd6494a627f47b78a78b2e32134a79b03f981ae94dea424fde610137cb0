{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":38,"index":91}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":133},"end":{"line":4,"column":24,"index":157}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.registerForPushNotificationsAsync = registerForPushNotificationsAsync;\n  exports.setupNotificationListeners = setupNotificationListeners;\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[1], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _api = require(_dependencyMap[3], \"./api\");\n  var api = _interopDefault(_api);\n  // Configure how notifications are handled when app is in foreground\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  async function registerForPushNotificationsAsync() {\n    let token = null;\n    if (Platform.default.OS === 'web') {\n      console.log('Push notifications not supported on web');\n      return null;\n    }\n    if (!Device.isDevice) {\n      console.log('Must use physical device for Push Notifications');\n      return null;\n    }\n    try {\n      const {\n        status: existingStatus\n      } = await Notifications.getPermissionsAsync();\n      let finalStatus = existingStatus;\n      if (existingStatus !== 'granted') {\n        const {\n          status\n        } = await Notifications.requestPermissionsAsync();\n        finalStatus = status;\n      }\n      if (finalStatus !== 'granted') {\n        console.log('Failed to get push token for push notification!');\n        return null;\n      }\n      token = (await Notifications.getExpoPushTokenAsync()).data;\n      console.log('Push token:', token);\n\n      // Register token with backend\n      await api.default.post('/auth/register-push-token', null, {\n        params: {\n          push_token: token\n        }\n      });\n      console.log('Push token registered with backend');\n    } catch (error) {\n      console.error('Error registering for push notifications:', error);\n    }\n    if (Platform.default.OS === 'android') {\n      Notifications.setNotificationChannelAsync('default', {\n        name: 'default',\n        importance: Notifications.AndroidImportance.MAX,\n        vibrationPattern: [0, 250, 250, 250],\n        lightColor: '#FF231F7C'\n      });\n    }\n    return token;\n  }\n  function setupNotificationListeners() {\n    // Handle notification received while app is in foreground\n    const notificationListener = Notifications.addNotificationReceivedListener(notification => {\n      console.log('Notification received:', notification);\n    });\n\n    // Handle notification tapped\n    const responseListener = Notifications.addNotificationResponseReceivedListener(response => {\n      console.log('Notification tapped:', response);\n      const data = response.notification.request.content.data;\n\n      // Handle navigation based on notification type\n      if (data.type === 'new_quote') {\n        // Navigate to quotes\n      } else if (data.type === 'new_inspection') {\n        // Navigate to inspections\n      } else if (data.type === 'new_message') {\n        // Navigate to chat\n      }\n    });\n    return {\n      notificationListener,\n      responseListener\n    };\n  }\n});","lineCount":118,"map":[[27,2,15,0,"exports"],[27,9,15,0],[27,10,15,0,"registerForPushNotificationsAsync"],[27,43,15,0],[27,46,15,0,"registerForPushNotificationsAsync"],[27,79,15,0],[28,2,67,0,"exports"],[28,9,67,0],[28,10,67,0,"setupNotificationListeners"],[28,36,67,0],[28,39,67,0,"setupNotificationListeners"],[28,65,67,0],[29,2,1,0],[29,6,1,0,"_expoNotifications"],[29,24,1,0],[29,27,1,0,"require"],[29,34,1,0],[29,35,1,0,"_dependencyMap"],[29,49,1,0],[30,2,1,0],[30,6,1,0,"Notifications"],[30,19,1,0],[30,22,1,0,"_interopNamespace"],[30,39,1,0],[30,40,1,0,"_expoNotifications"],[30,58,1,0],[31,2,2,0],[31,6,2,0,"_expoDevice"],[31,17,2,0],[31,20,2,0,"require"],[31,27,2,0],[31,28,2,0,"_dependencyMap"],[31,42,2,0],[32,2,2,0],[32,6,2,0,"Device"],[32,12,2,0],[32,15,2,0,"_interopNamespace"],[32,32,2,0],[32,33,2,0,"_expoDevice"],[32,44,2,0],[33,2,2,38],[33,6,2,38,"_reactNativeWebDistExportsPlatform"],[33,40,2,38],[33,43,2,38,"require"],[33,50,2,38],[33,51,2,38,"_dependencyMap"],[33,65,2,38],[34,2,2,38],[34,6,2,38,"Platform"],[34,14,2,38],[34,17,2,38,"_interopDefault"],[34,32,2,38],[34,33,2,38,"_reactNativeWebDistExportsPlatform"],[34,67,2,38],[35,2,4,0],[35,6,4,0,"_api"],[35,10,4,0],[35,13,4,0,"require"],[35,20,4,0],[35,21,4,0,"_dependencyMap"],[35,35,4,0],[36,2,4,0],[36,6,4,0,"api"],[36,9,4,0],[36,12,4,0,"_interopDefault"],[36,27,4,0],[36,28,4,0,"_api"],[36,32,4,0],[37,2,6,0],[38,2,7,0,"Notifications"],[38,15,7,13],[38,16,7,14,"setNotificationHandler"],[38,38,7,36],[38,39,7,37],[39,4,8,2,"handleNotification"],[39,22,8,20],[39,24,8,22],[39,30,8,22,"handleNotification"],[39,31,8,22],[39,37,8,35],[40,6,9,4,"shouldShowAlert"],[40,21,9,19],[40,23,9,21],[40,27,9,25],[41,6,10,4,"shouldPlaySound"],[41,21,10,19],[41,23,10,21],[41,27,10,25],[42,6,11,4,"shouldSetBadge"],[42,20,11,18],[42,22,11,20],[43,4,12,2],[43,5,12,3],[44,2,13,0],[44,3,13,1],[44,4,13,2],[45,2,15,7],[45,17,15,22,"registerForPushNotificationsAsync"],[45,50,15,55,"registerForPushNotificationsAsync"],[45,51,15,55],[45,53,15,82],[46,4,16,2],[46,8,16,6,"token"],[46,13,16,11],[46,16,16,14],[46,20,16,18],[47,4,18,2],[47,8,18,6,"Platform"],[47,16,18,14],[47,17,18,14,"default"],[47,24,18,14],[47,25,18,15,"OS"],[47,27,18,17],[47,32,18,22],[47,37,18,27],[47,39,18,29],[48,6,19,4,"console"],[48,13,19,11],[48,14,19,12,"log"],[48,17,19,15],[48,18,19,16],[48,59,19,57],[48,60,19,58],[49,6,20,4],[49,13,20,11],[49,17,20,15],[50,4,21,2],[51,4,23,2],[51,8,23,6],[51,9,23,7,"Device"],[51,15,23,13],[51,16,23,14,"isDevice"],[51,24,23,22],[51,26,23,24],[52,6,24,4,"console"],[52,13,24,11],[52,14,24,12,"log"],[52,17,24,15],[52,18,24,16],[52,67,24,65],[52,68,24,66],[53,6,25,4],[53,13,25,11],[53,17,25,15],[54,4,26,2],[55,4,28,2],[55,8,28,6],[56,6,29,4],[56,12,29,10],[57,8,29,12,"status"],[57,14,29,18],[57,16,29,20,"existingStatus"],[58,6,29,35],[58,7,29,36],[58,10,29,39],[58,16,29,45,"Notifications"],[58,29,29,58],[58,30,29,59,"getPermissionsAsync"],[58,49,29,78],[58,50,29,79],[58,51,29,80],[59,6,30,4],[59,10,30,8,"finalStatus"],[59,21,30,19],[59,24,30,22,"existingStatus"],[59,38,30,36],[60,6,32,4],[60,10,32,8,"existingStatus"],[60,24,32,22],[60,29,32,27],[60,38,32,36],[60,40,32,38],[61,8,33,6],[61,14,33,12],[62,10,33,14,"status"],[63,8,33,21],[63,9,33,22],[63,12,33,25],[63,18,33,31,"Notifications"],[63,31,33,44],[63,32,33,45,"requestPermissionsAsync"],[63,55,33,68],[63,56,33,69],[63,57,33,70],[64,8,34,6,"finalStatus"],[64,19,34,17],[64,22,34,20,"status"],[64,28,34,26],[65,6,35,4],[66,6,37,4],[66,10,37,8,"finalStatus"],[66,21,37,19],[66,26,37,24],[66,35,37,33],[66,37,37,35],[67,8,38,6,"console"],[67,15,38,13],[67,16,38,14,"log"],[67,19,38,17],[67,20,38,18],[67,69,38,67],[67,70,38,68],[68,8,39,6],[68,15,39,13],[68,19,39,17],[69,6,40,4],[70,6,42,4,"token"],[70,11,42,9],[70,14,42,12],[70,15,42,13],[70,21,42,19,"Notifications"],[70,34,42,32],[70,35,42,33,"getExpoPushTokenAsync"],[70,56,42,54],[70,57,42,55],[70,58,42,56],[70,60,42,58,"data"],[70,64,42,62],[71,6,43,4,"console"],[71,13,43,11],[71,14,43,12,"log"],[71,17,43,15],[71,18,43,16],[71,31,43,29],[71,33,43,31,"token"],[71,38,43,36],[71,39,43,37],[73,6,45,4],[74,6,46,4],[74,12,46,10,"api"],[74,15,46,13],[74,16,46,13,"default"],[74,23,46,13],[74,24,46,14,"post"],[74,28,46,18],[74,29,46,19],[74,56,46,46],[74,58,46,48],[74,62,46,52],[74,64,46,54],[75,8,47,6,"params"],[75,14,47,12],[75,16,47,14],[76,10,47,16,"push_token"],[76,20,47,26],[76,22,47,28,"token"],[77,8,47,34],[78,6,48,4],[78,7,48,5],[78,8,48,6],[79,6,49,4,"console"],[79,13,49,11],[79,14,49,12,"log"],[79,17,49,15],[79,18,49,16],[79,54,49,52],[79,55,49,53],[80,4,51,2],[80,5,51,3],[80,6,51,4],[80,13,51,11,"error"],[80,18,51,16],[80,20,51,18],[81,6,52,4,"console"],[81,13,52,11],[81,14,52,12,"error"],[81,19,52,17],[81,20,52,18],[81,63,52,61],[81,65,52,63,"error"],[81,70,52,68],[81,71,52,69],[82,4,53,2],[83,4,55,2],[83,8,55,6,"Platform"],[83,16,55,14],[83,17,55,14,"default"],[83,24,55,14],[83,25,55,15,"OS"],[83,27,55,17],[83,32,55,22],[83,41,55,31],[83,43,55,33],[84,6,56,4,"Notifications"],[84,19,56,17],[84,20,56,18,"setNotificationChannelAsync"],[84,47,56,45],[84,48,56,46],[84,57,56,55],[84,59,56,57],[85,8,57,6,"name"],[85,12,57,10],[85,14,57,12],[85,23,57,21],[86,8,58,6,"importance"],[86,18,58,16],[86,20,58,18,"Notifications"],[86,33,58,31],[86,34,58,32,"AndroidImportance"],[86,51,58,49],[86,52,58,50,"MAX"],[86,55,58,53],[87,8,59,6,"vibrationPattern"],[87,24,59,22],[87,26,59,24],[87,27,59,25],[87,28,59,26],[87,30,59,28],[87,33,59,31],[87,35,59,33],[87,38,59,36],[87,40,59,38],[87,43,59,41],[87,44,59,42],[88,8,60,6,"lightColor"],[88,18,60,16],[88,20,60,18],[89,6,61,4],[89,7,61,5],[89,8,61,6],[90,4,62,2],[91,4,64,2],[91,11,64,9,"token"],[91,16,64,14],[92,2,65,0],[93,2,67,7],[93,11,67,16,"setupNotificationListeners"],[93,37,67,42,"setupNotificationListeners"],[93,38,67,42],[93,40,67,45],[94,4,68,2],[95,4,69,2],[95,10,69,8,"notificationListener"],[95,30,69,28],[95,33,69,31,"Notifications"],[95,46,69,44],[95,47,69,45,"addNotificationReceivedListener"],[95,78,69,76],[95,79,69,77,"notification"],[95,91,69,89],[95,95,69,93],[96,6,70,4,"console"],[96,13,70,11],[96,14,70,12,"log"],[96,17,70,15],[96,18,70,16],[96,42,70,40],[96,44,70,42,"notification"],[96,56,70,54],[96,57,70,55],[97,4,71,2],[97,5,71,3],[97,6,71,4],[99,4,73,2],[100,4,74,2],[100,10,74,8,"responseListener"],[100,26,74,24],[100,29,74,27,"Notifications"],[100,42,74,40],[100,43,74,41,"addNotificationResponseReceivedListener"],[100,82,74,80],[100,83,74,81,"response"],[100,91,74,89],[100,95,74,93],[101,6,75,4,"console"],[101,13,75,11],[101,14,75,12,"log"],[101,17,75,15],[101,18,75,16],[101,40,75,38],[101,42,75,40,"response"],[101,50,75,48],[101,51,75,49],[102,6,76,4],[102,12,76,10,"data"],[102,16,76,14],[102,19,76,17,"response"],[102,27,76,25],[102,28,76,26,"notification"],[102,40,76,38],[102,41,76,39,"request"],[102,48,76,46],[102,49,76,47,"content"],[102,56,76,54],[102,57,76,55,"data"],[102,61,76,59],[104,6,78,4],[105,6,79,4],[105,10,79,8,"data"],[105,14,79,12],[105,15,79,13,"type"],[105,19,79,17],[105,24,79,22],[105,35,79,33],[105,37,79,35],[106,8,80,6],[107,6,80,6],[107,7,81,5],[107,13,81,11],[107,17,81,15,"data"],[107,21,81,19],[107,22,81,20,"type"],[107,26,81,24],[107,31,81,29],[107,47,81,45],[107,49,81,47],[108,8,82,6],[109,6,82,6],[109,7,83,5],[109,13,83,11],[109,17,83,15,"data"],[109,21,83,19],[109,22,83,20,"type"],[109,26,83,24],[109,31,83,29],[109,44,83,42],[109,46,83,44],[110,8,84,6],[111,6,84,6],[112,4,86,2],[112,5,86,3],[112,6,86,4],[113,4,88,2],[113,11,88,9],[114,6,89,4,"notificationListener"],[114,26,89,24],[115,6,90,4,"responseListener"],[116,4,91,2],[116,5,91,3],[117,2,92,0],[118,0,92,1],[118,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","registerForPushNotificationsAsync","setupNotificationListeners","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0"],"mappings":"AAA;sBCO;IDI;OEG;CFkD;OGE;6ECE;GDE;iFEG;GFY;CHM"},"hasCjsExports":false},"type":"js/module"}]}