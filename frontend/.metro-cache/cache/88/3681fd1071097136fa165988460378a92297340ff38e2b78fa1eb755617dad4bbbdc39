{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/auth.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":61,"index":140}}],"key":"OAwOj13pryMi7HegghVkxChHnhI=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":141},"end":{"line":3,"column":50,"index":191}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../services/notifications.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":192},"end":{"line":4,"column":114,"index":306}}],"key":"wN7e6rqBf7ZuKvH36NXG+/TSRnI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesAuthService = require(_dependencyMap[1], \"../services/auth.service\");\n  var authService = _interopDefault(_servicesAuthService);\n  var _storeAuthStore = require(_dependencyMap[2], \"../store/authStore\");\n  var _servicesNotificationsService = require(_dependencyMap[3], \"../services/notifications.service\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const {\n      user,\n      isLoading,\n      isAuthenticated,\n      setUser,\n      setLoading,\n      logout: storeLogout\n    } = (0, _storeAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        setLoading(true);\n        const token = await authService.default.getToken();\n        if (token) {\n          const currentUser = await authService.default.getCurrentUser();\n          if (currentUser) {\n            setUser(currentUser);\n          } else {\n            setUser(null);\n          }\n        } else {\n          setUser(null);\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password, stayLoggedIn = true) => {\n      try {\n        const {\n          user\n        } = await authService.default.login({\n          email,\n          password\n        }, stayLoggedIn);\n        setUser(user);\n\n        // Register for push notifications after successful login\n        // Note: Push notifications work via device tokens and persist even when logged out\n        (0, _servicesNotificationsService.registerForPushNotificationsAsync)().catch(error => {\n          console.error('Failed to register for push notifications:', error);\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async data => {\n      try {\n        const {\n          user\n        } = await authService.default.register(data);\n        setUser(user);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await authService.default.logout();\n      storeLogout();\n    };\n    const updateUser = updatedUser => {\n      if (user) {\n        setUser(Object.assign({}, user, updatedUser));\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated,\n        login,\n        register,\n        logout,\n        updateUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"1WMNXmMClNBWhtYWBsc1Azwbups=\", false, function () {\n    return [_storeAuthStore.useAuthStore];\n  });\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":140,"map":[[15,2,18,0,"Object"],[15,8,18,0],[15,9,18,0,"defineProperty"],[15,23,18,0],[15,24,18,0,"exports"],[15,31,18,0],[16,4,18,0,"enumerable"],[16,14,18,0],[17,4,18,0,"get"],[17,7,18,0],[17,18,18,0,"get"],[17,19,18,0],[18,6,18,0],[18,13,18,0,"AuthProvider"],[18,25,18,0],[19,4,18,0],[20,2,18,0],[21,2,90,0,"Object"],[21,8,90,0],[21,9,90,0,"defineProperty"],[21,23,90,0],[21,24,90,0,"exports"],[21,31,90,0],[22,4,90,0,"enumerable"],[22,14,90,0],[23,4,90,0,"get"],[23,7,90,0],[23,18,90,0,"get"],[23,19,90,0],[24,6,90,0],[24,13,90,0,"useAuth"],[24,20,90,0],[25,4,90,0],[26,2,90,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_servicesAuthService"],[28,26,2,0],[28,29,2,0,"require"],[28,36,2,0],[28,37,2,0,"_dependencyMap"],[28,51,2,0],[29,2,2,0],[29,6,2,0,"authService"],[29,17,2,0],[29,20,2,0,"_interopDefault"],[29,35,2,0],[29,36,2,0,"_servicesAuthService"],[29,56,2,0],[30,2,3,0],[30,6,3,0,"_storeAuthStore"],[30,21,3,0],[30,24,3,0,"require"],[30,31,3,0],[30,32,3,0,"_dependencyMap"],[30,46,3,0],[31,2,4,0],[31,6,4,0,"_servicesNotificationsService"],[31,35,4,0],[31,38,4,0,"require"],[31,45,4,0],[31,46,4,0,"_dependencyMap"],[31,60,4,0],[32,2,4,114],[32,6,4,114,"_reactJsxDevRuntime"],[32,25,4,114],[32,28,4,114,"require"],[32,35,4,114],[32,36,4,114,"_dependencyMap"],[32,50,4,114],[33,2,16,0],[33,8,16,6,"AuthContext"],[33,19,16,17],[33,35,16,20],[33,39,16,20,"createContext"],[33,45,16,33],[33,46,16,33,"createContext"],[33,59,16,33],[33,61,16,63,"undefined"],[33,70,16,72],[33,71,16,73],[34,2,18,7],[34,8,18,13,"AuthProvider"],[34,20,18,66],[34,23,18,69,"AuthProvider"],[34,24,18,70],[35,4,18,72,"children"],[36,2,18,81],[36,3,18,82],[36,8,18,87],[37,4,18,87,"_s"],[37,6,18,87],[38,4,19,2],[38,10,19,8],[39,6,19,10,"user"],[39,10,19,14],[40,6,19,16,"isLoading"],[40,15,19,25],[41,6,19,27,"isAuthenticated"],[41,21,19,42],[42,6,19,44,"setUser"],[42,13,19,51],[43,6,19,53,"setLoading"],[43,16,19,63],[44,6,19,65,"logout"],[44,12,19,71],[44,14,19,73,"storeLogout"],[45,4,19,85],[45,5,19,86],[45,8,19,89],[45,12,19,89,"useAuthStore"],[45,27,19,101],[45,28,19,101,"useAuthStore"],[45,40,19,101],[45,42,19,102],[45,43,19,103],[46,4,21,2],[46,8,21,2,"useEffect"],[46,14,21,11],[46,15,21,11,"useEffect"],[46,24,21,11],[46,26,21,12],[46,32,21,18],[47,6,22,4,"checkAuth"],[47,15,22,13],[47,16,22,14],[47,17,22,15],[48,4,23,2],[48,5,23,3],[48,7,23,5],[48,9,23,7],[48,10,23,8],[49,4,25,2],[49,10,25,8,"checkAuth"],[49,19,25,17],[49,22,25,20],[49,28,25,20,"checkAuth"],[49,29,25,20],[49,34,25,32],[50,6,26,4],[50,10,26,8],[51,8,27,6,"setLoading"],[51,18,27,16],[51,19,27,17],[51,23,27,21],[51,24,27,22],[52,8,28,6],[52,14,28,12,"token"],[52,19,28,17],[52,22,28,20],[52,28,28,26,"authService"],[52,39,28,37],[52,40,28,37,"default"],[52,47,28,37],[52,48,28,38,"getToken"],[52,56,28,46],[52,57,28,47],[52,58,28,48],[53,8,30,6],[53,12,30,10,"token"],[53,17,30,15],[53,19,30,17],[54,10,31,8],[54,16,31,14,"currentUser"],[54,27,31,25],[54,30,31,28],[54,36,31,34,"authService"],[54,47,31,45],[54,48,31,45,"default"],[54,55,31,45],[54,56,31,46,"getCurrentUser"],[54,70,31,60],[54,71,31,61],[54,72,31,62],[55,10,32,8],[55,14,32,12,"currentUser"],[55,25,32,23],[55,27,32,25],[56,12,33,10,"setUser"],[56,19,33,17],[56,20,33,18,"currentUser"],[56,31,33,29],[56,32,33,30],[57,10,34,8],[57,11,34,9],[57,17,34,15],[58,12,35,10,"setUser"],[58,19,35,17],[58,20,35,18],[58,24,35,22],[58,25,35,23],[59,10,36,8],[60,8,37,6],[60,9,37,7],[60,15,37,13],[61,10,38,8,"setUser"],[61,17,38,15],[61,18,38,16],[61,22,38,20],[61,23,38,21],[62,8,39,6],[63,6,40,4],[63,7,40,5],[63,8,40,6],[63,15,40,13,"error"],[63,20,40,18],[63,22,40,20],[64,8,41,6,"console"],[64,15,41,13],[64,16,41,14,"error"],[64,21,41,19],[64,22,41,20],[64,41,41,39],[64,43,41,41,"error"],[64,48,41,46],[64,49,41,47],[65,8,42,6,"setUser"],[65,15,42,13],[65,16,42,14],[65,20,42,18],[65,21,42,19],[66,6,43,4],[66,7,43,5],[66,16,43,14],[67,8,44,6,"setLoading"],[67,18,44,16],[67,19,44,17],[67,24,44,22],[67,25,44,23],[68,6,45,4],[69,4,46,2],[69,5,46,3],[70,4,48,2],[70,10,48,8,"login"],[70,15,48,13],[70,18,48,16],[70,24,48,16,"login"],[70,25,48,23,"email"],[70,30,48,36],[70,32,48,38,"password"],[70,40,48,54],[70,42,48,56,"stayLoggedIn"],[70,54,48,77],[70,57,48,80],[70,61,48,84],[70,66,48,89],[71,6,49,4],[71,10,49,8],[72,8,50,6],[72,14,50,12],[73,10,50,14,"user"],[74,8,50,19],[74,9,50,20],[74,12,50,23],[74,18,50,29,"authService"],[74,29,50,40],[74,30,50,40,"default"],[74,37,50,40],[74,38,50,41,"login"],[74,43,50,46],[74,44,50,47],[75,10,50,49,"email"],[75,15,50,54],[76,10,50,56,"password"],[77,8,50,65],[77,9,50,66],[77,11,50,68,"stayLoggedIn"],[77,23,50,80],[77,24,50,81],[78,8,51,6,"setUser"],[78,15,51,13],[78,16,51,14,"user"],[78,20,51,18],[78,21,51,19],[80,8,53,6],[81,8,54,6],[82,8,55,6],[82,12,55,6,"registerForPushNotificationsAsync"],[82,41,55,39],[82,42,55,39,"registerForPushNotificationsAsync"],[82,75,55,39],[82,77,55,40],[82,78,55,41],[82,79,55,42,"catch"],[82,84,55,47],[82,85,55,49,"error"],[82,90,55,54],[82,94,55,59],[83,10,56,8,"console"],[83,17,56,15],[83,18,56,16,"error"],[83,23,56,21],[83,24,56,22],[83,68,56,66],[83,70,56,68,"error"],[83,75,56,73],[83,76,56,74],[84,8,57,6],[84,9,57,7],[84,10,57,8],[85,6,58,4],[85,7,58,5],[85,8,58,6],[85,15,58,13,"error"],[85,20,58,23],[85,22,58,25],[86,8,59,6],[86,14,59,12],[86,18,59,16,"Error"],[86,23,59,21],[86,24,59,22,"error"],[86,29,59,27],[86,30,59,28,"response"],[86,38,59,36],[86,40,59,38,"data"],[86,44,59,42],[86,46,59,44,"detail"],[86,52,59,50],[86,56,59,54],[86,70,59,68],[86,71,59,69],[87,6,60,4],[88,4,61,2],[88,5,61,3],[89,4,63,2],[89,10,63,8,"register"],[89,18,63,16],[89,21,63,19],[89,27,63,26,"data"],[89,31,63,35],[89,35,63,40],[90,6,64,4],[90,10,64,8],[91,8,65,6],[91,14,65,12],[92,10,65,14,"user"],[93,8,65,19],[93,9,65,20],[93,12,65,23],[93,18,65,29,"authService"],[93,29,65,40],[93,30,65,40,"default"],[93,37,65,40],[93,38,65,41,"register"],[93,46,65,49],[93,47,65,50,"data"],[93,51,65,54],[93,52,65,55],[94,8,66,6,"setUser"],[94,15,66,13],[94,16,66,14,"user"],[94,20,66,18],[94,21,66,19],[95,6,67,4],[95,7,67,5],[95,8,67,6],[95,15,67,13,"error"],[95,20,67,23],[95,22,67,25],[96,8,68,6],[96,14,68,12],[96,18,68,16,"Error"],[96,23,68,21],[96,24,68,22,"error"],[96,29,68,27],[96,30,68,28,"response"],[96,38,68,36],[96,40,68,38,"data"],[96,44,68,42],[96,46,68,44,"detail"],[96,52,68,50],[96,56,68,54],[96,77,68,75],[96,78,68,76],[97,6,69,4],[98,4,70,2],[98,5,70,3],[99,4,72,2],[99,10,72,8,"logout"],[99,16,72,14],[99,19,72,17],[99,25,72,17,"logout"],[99,26,72,17],[99,31,72,29],[100,6,73,4],[100,12,73,10,"authService"],[100,23,73,21],[100,24,73,21,"default"],[100,31,73,21],[100,32,73,22,"logout"],[100,38,73,28],[100,39,73,29],[100,40,73,30],[101,6,74,4,"storeLogout"],[101,17,74,15],[101,18,74,16],[101,19,74,17],[102,4,75,2],[102,5,75,3],[103,4,77,2],[103,10,77,8,"updateUser"],[103,20,77,18],[103,23,77,22,"updatedUser"],[103,34,77,48],[103,38,77,53],[104,6,78,4],[104,10,78,8,"user"],[104,14,78,12],[104,16,78,14],[105,8,79,6,"setUser"],[105,15,79,13],[105,16,79,13,"Object"],[105,22,79,13],[105,23,79,13,"assign"],[105,29,79,13],[105,34,79,19,"user"],[105,38,79,23],[105,40,79,28,"updatedUser"],[105,51,79,39],[105,52,79,41],[105,53,79,42],[106,6,80,4],[107,4,81,2],[107,5,81,3],[108,4,83,2],[108,24,84,4],[108,28,84,4,"_reactJsxDevRuntime"],[108,47,84,4],[108,48,84,4,"jsxDEV"],[108,54,84,4],[108,56,84,5,"AuthContext"],[108,67,84,16],[108,68,84,17,"Provider"],[108,76,84,25],[109,6,84,26,"value"],[109,11,84,31],[109,13,84,33],[110,8,84,35,"user"],[110,12,84,39],[111,8,84,41,"isLoading"],[111,17,84,50],[112,8,84,52,"isAuthenticated"],[112,23,84,67],[113,8,84,69,"login"],[113,13,84,74],[114,8,84,76,"register"],[114,16,84,84],[115,8,84,86,"logout"],[115,14,84,92],[116,8,84,94,"updateUser"],[117,6,84,105],[117,7,84,107],[118,6,84,107,"children"],[118,14,84,107],[118,16,85,7,"children"],[119,4,85,15],[120,6,85,15,"fileName"],[120,14,85,15],[120,16,85,15,"_jsxFileName"],[120,28,85,15],[121,6,85,15,"lineNumber"],[121,16,85,15],[122,6,85,15,"columnNumber"],[122,18,85,15],[123,4,85,15],[123,11,86,26],[123,12,86,27],[124,2,88,0],[124,3,88,1],[125,2,88,2,"_s"],[125,4,88,2],[125,5,18,13,"AuthProvider"],[125,17,18,66],[126,4,18,66],[126,12,19,89,"useAuthStore"],[126,27,19,101],[126,28,19,101,"useAuthStore"],[126,40,19,101],[127,2,19,101],[128,2,19,101,"_c"],[128,4,19,101],[128,7,18,13,"AuthProvider"],[128,19,18,66],[129,2,90,7],[129,8,90,13,"useAuth"],[129,15,90,20],[129,18,90,23,"useAuth"],[129,19,90,23],[129,24,90,29],[130,4,90,29,"_s2"],[130,7,90,29],[131,4,91,2],[131,10,91,8,"context"],[131,17,91,15],[131,20,91,18],[131,24,91,18,"useContext"],[131,30,91,28],[131,31,91,28,"useContext"],[131,41,91,28],[131,43,91,29,"AuthContext"],[131,54,91,40],[131,55,91,41],[132,4,92,2],[132,8,92,6],[132,9,92,7,"context"],[132,16,92,14],[132,18,92,16],[133,6,93,4],[133,12,93,10],[133,16,93,14,"Error"],[133,21,93,19],[133,22,93,20],[133,64,93,62],[133,65,93,63],[134,4,94,2],[135,4,95,2],[135,11,95,9,"context"],[135,18,95,16],[136,2,96,0],[136,3,96,1],[137,2,96,2,"_s2"],[137,5,96,2],[137,6,90,13,"useAuth"],[137,13,90,20],[138,2,90,20],[138,6,90,20,"_c"],[138,8,90,20],[139,2,90,20,"$RefreshReg$"],[139,14,90,20],[139,15,90,20,"_c"],[139,17,90,20],[140,0,90,20],[140,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","registerForPushNotificationsAsync._catch$argument_0","register","logout","updateUser","useAuth"],"mappings":"AAA;qECiB;YCG;GDE;oBEE;GFqB;gBGE;gDCO;ODE;GHI;mBKE;GLO;iBME;GNG;qBOE;GPI;CDO;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}