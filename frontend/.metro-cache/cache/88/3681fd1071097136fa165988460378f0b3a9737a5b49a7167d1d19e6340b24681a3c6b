{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/auth.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":61,"index":140}}],"key":"OAwOj13pryMi7HegghVkxChHnhI=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":141},"end":{"line":3,"column":50,"index":191}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../services/notifications.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":192},"end":{"line":4,"column":114,"index":306}}],"key":"wN7e6rqBf7ZuKvH36NXG+/TSRnI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesAuthService = require(_dependencyMap[1], \"../services/auth.service\");\n  var authService = _interopDefault(_servicesAuthService);\n  var _storeAuthStore = require(_dependencyMap[2], \"../store/authStore\");\n  var _servicesNotificationsService = require(_dependencyMap[3], \"../services/notifications.service\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const {\n      user,\n      isLoading,\n      isAuthenticated,\n      setUser,\n      setLoading,\n      logout: storeLogout\n    } = (0, _storeAuthStore.useAuthStore)();\n    const [showConsentModal, setShowConsentModal] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        setLoading(true);\n        const token = await authService.default.getToken();\n        if (token) {\n          const currentUser = await authService.default.getCurrentUser();\n          if (currentUser) {\n            setUser(currentUser);\n          } else {\n            setUser(null);\n          }\n        } else {\n          setUser(null);\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password, stayLoggedIn = true) => {\n      try {\n        const {\n          user\n        } = await authService.default.login({\n          email,\n          password\n        }, stayLoggedIn);\n        setUser(user);\n\n        // Register for push notifications after successful login\n        // Note: Push notifications work via device tokens and persist even when logged out\n        (0, _servicesNotificationsService.registerForPushNotificationsAsync)().catch(error => {\n          console.error('Failed to register for push notifications:', error);\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async data => {\n      try {\n        const {\n          user\n        } = await authService.default.register(data);\n        setUser(user);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await authService.default.logout();\n      storeLogout();\n    };\n    const updateUser = updatedUser => {\n      if (user) {\n        setUser(Object.assign({}, user, updatedUser));\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated,\n        login,\n        register,\n        logout,\n        updateUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"5Od3Pf7S4XDYgFlPpClHBgMia7s=\", false, function () {\n    return [_storeAuthStore.useAuthStore];\n  });\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":141,"map":[[15,2,19,0,"Object"],[15,8,19,0],[15,9,19,0,"defineProperty"],[15,23,19,0],[15,24,19,0,"exports"],[15,31,19,0],[16,4,19,0,"enumerable"],[16,14,19,0],[17,4,19,0,"get"],[17,7,19,0],[17,18,19,0,"get"],[17,19,19,0],[18,6,19,0],[18,13,19,0,"AuthProvider"],[18,25,19,0],[19,4,19,0],[20,2,19,0],[21,2,92,0,"Object"],[21,8,92,0],[21,9,92,0,"defineProperty"],[21,23,92,0],[21,24,92,0,"exports"],[21,31,92,0],[22,4,92,0,"enumerable"],[22,14,92,0],[23,4,92,0,"get"],[23,7,92,0],[23,18,92,0,"get"],[23,19,92,0],[24,6,92,0],[24,13,92,0,"useAuth"],[24,20,92,0],[25,4,92,0],[26,2,92,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_servicesAuthService"],[28,26,2,0],[28,29,2,0,"require"],[28,36,2,0],[28,37,2,0,"_dependencyMap"],[28,51,2,0],[29,2,2,0],[29,6,2,0,"authService"],[29,17,2,0],[29,20,2,0,"_interopDefault"],[29,35,2,0],[29,36,2,0,"_servicesAuthService"],[29,56,2,0],[30,2,3,0],[30,6,3,0,"_storeAuthStore"],[30,21,3,0],[30,24,3,0,"require"],[30,31,3,0],[30,32,3,0,"_dependencyMap"],[30,46,3,0],[31,2,4,0],[31,6,4,0,"_servicesNotificationsService"],[31,35,4,0],[31,38,4,0,"require"],[31,45,4,0],[31,46,4,0,"_dependencyMap"],[31,60,4,0],[32,2,4,114],[32,6,4,114,"_reactJsxDevRuntime"],[32,25,4,114],[32,28,4,114,"require"],[32,35,4,114],[32,36,4,114,"_dependencyMap"],[32,50,4,114],[33,2,17,0],[33,8,17,6,"AuthContext"],[33,19,17,17],[33,35,17,20],[33,39,17,20,"createContext"],[33,45,17,33],[33,46,17,33,"createContext"],[33,59,17,33],[33,61,17,63,"undefined"],[33,70,17,72],[33,71,17,73],[34,2,19,7],[34,8,19,13,"AuthProvider"],[34,20,19,66],[34,23,19,69,"AuthProvider"],[34,24,19,70],[35,4,19,72,"children"],[36,2,19,81],[36,3,19,82],[36,8,19,87],[37,4,19,87,"_s"],[37,6,19,87],[38,4,20,2],[38,10,20,8],[39,6,20,10,"user"],[39,10,20,14],[40,6,20,16,"isLoading"],[40,15,20,25],[41,6,20,27,"isAuthenticated"],[41,21,20,42],[42,6,20,44,"setUser"],[42,13,20,51],[43,6,20,53,"setLoading"],[43,16,20,63],[44,6,20,65,"logout"],[44,12,20,71],[44,14,20,73,"storeLogout"],[45,4,20,85],[45,5,20,86],[45,8,20,89],[45,12,20,89,"useAuthStore"],[45,27,20,101],[45,28,20,101,"useAuthStore"],[45,40,20,101],[45,42,20,102],[45,43,20,103],[46,4,21,2],[46,10,21,8],[46,11,21,9,"showConsentModal"],[46,27,21,25],[46,29,21,27,"setShowConsentModal"],[46,48,21,46],[46,49,21,47],[46,52,21,50],[46,56,21,50,"useState"],[46,62,21,58],[46,63,21,58,"useState"],[46,71,21,58],[46,73,21,59],[46,78,21,64],[46,79,21,65],[47,4,23,2],[47,8,23,2,"useEffect"],[47,14,23,11],[47,15,23,11,"useEffect"],[47,24,23,11],[47,26,23,12],[47,32,23,18],[48,6,24,4,"checkAuth"],[48,15,24,13],[48,16,24,14],[48,17,24,15],[49,4,25,2],[49,5,25,3],[49,7,25,5],[49,9,25,7],[49,10,25,8],[50,4,27,2],[50,10,27,8,"checkAuth"],[50,19,27,17],[50,22,27,20],[50,28,27,20,"checkAuth"],[50,29,27,20],[50,34,27,32],[51,6,28,4],[51,10,28,8],[52,8,29,6,"setLoading"],[52,18,29,16],[52,19,29,17],[52,23,29,21],[52,24,29,22],[53,8,30,6],[53,14,30,12,"token"],[53,19,30,17],[53,22,30,20],[53,28,30,26,"authService"],[53,39,30,37],[53,40,30,37,"default"],[53,47,30,37],[53,48,30,38,"getToken"],[53,56,30,46],[53,57,30,47],[53,58,30,48],[54,8,32,6],[54,12,32,10,"token"],[54,17,32,15],[54,19,32,17],[55,10,33,8],[55,16,33,14,"currentUser"],[55,27,33,25],[55,30,33,28],[55,36,33,34,"authService"],[55,47,33,45],[55,48,33,45,"default"],[55,55,33,45],[55,56,33,46,"getCurrentUser"],[55,70,33,60],[55,71,33,61],[55,72,33,62],[56,10,34,8],[56,14,34,12,"currentUser"],[56,25,34,23],[56,27,34,25],[57,12,35,10,"setUser"],[57,19,35,17],[57,20,35,18,"currentUser"],[57,31,35,29],[57,32,35,30],[58,10,36,8],[58,11,36,9],[58,17,36,15],[59,12,37,10,"setUser"],[59,19,37,17],[59,20,37,18],[59,24,37,22],[59,25,37,23],[60,10,38,8],[61,8,39,6],[61,9,39,7],[61,15,39,13],[62,10,40,8,"setUser"],[62,17,40,15],[62,18,40,16],[62,22,40,20],[62,23,40,21],[63,8,41,6],[64,6,42,4],[64,7,42,5],[64,8,42,6],[64,15,42,13,"error"],[64,20,42,18],[64,22,42,20],[65,8,43,6,"console"],[65,15,43,13],[65,16,43,14,"error"],[65,21,43,19],[65,22,43,20],[65,41,43,39],[65,43,43,41,"error"],[65,48,43,46],[65,49,43,47],[66,8,44,6,"setUser"],[66,15,44,13],[66,16,44,14],[66,20,44,18],[66,21,44,19],[67,6,45,4],[67,7,45,5],[67,16,45,14],[68,8,46,6,"setLoading"],[68,18,46,16],[68,19,46,17],[68,24,46,22],[68,25,46,23],[69,6,47,4],[70,4,48,2],[70,5,48,3],[71,4,50,2],[71,10,50,8,"login"],[71,15,50,13],[71,18,50,16],[71,24,50,16,"login"],[71,25,50,23,"email"],[71,30,50,36],[71,32,50,38,"password"],[71,40,50,54],[71,42,50,56,"stayLoggedIn"],[71,54,50,77],[71,57,50,80],[71,61,50,84],[71,66,50,89],[72,6,51,4],[72,10,51,8],[73,8,52,6],[73,14,52,12],[74,10,52,14,"user"],[75,8,52,19],[75,9,52,20],[75,12,52,23],[75,18,52,29,"authService"],[75,29,52,40],[75,30,52,40,"default"],[75,37,52,40],[75,38,52,41,"login"],[75,43,52,46],[75,44,52,47],[76,10,52,49,"email"],[76,15,52,54],[77,10,52,56,"password"],[78,8,52,65],[78,9,52,66],[78,11,52,68,"stayLoggedIn"],[78,23,52,80],[78,24,52,81],[79,8,53,6,"setUser"],[79,15,53,13],[79,16,53,14,"user"],[79,20,53,18],[79,21,53,19],[81,8,55,6],[82,8,56,6],[83,8,57,6],[83,12,57,6,"registerForPushNotificationsAsync"],[83,41,57,39],[83,42,57,39,"registerForPushNotificationsAsync"],[83,75,57,39],[83,77,57,40],[83,78,57,41],[83,79,57,42,"catch"],[83,84,57,47],[83,85,57,49,"error"],[83,90,57,54],[83,94,57,59],[84,10,58,8,"console"],[84,17,58,15],[84,18,58,16,"error"],[84,23,58,21],[84,24,58,22],[84,68,58,66],[84,70,58,68,"error"],[84,75,58,73],[84,76,58,74],[85,8,59,6],[85,9,59,7],[85,10,59,8],[86,6,60,4],[86,7,60,5],[86,8,60,6],[86,15,60,13,"error"],[86,20,60,23],[86,22,60,25],[87,8,61,6],[87,14,61,12],[87,18,61,16,"Error"],[87,23,61,21],[87,24,61,22,"error"],[87,29,61,27],[87,30,61,28,"response"],[87,38,61,36],[87,40,61,38,"data"],[87,44,61,42],[87,46,61,44,"detail"],[87,52,61,50],[87,56,61,54],[87,70,61,68],[87,71,61,69],[88,6,62,4],[89,4,63,2],[89,5,63,3],[90,4,65,2],[90,10,65,8,"register"],[90,18,65,16],[90,21,65,19],[90,27,65,26,"data"],[90,31,65,35],[90,35,65,40],[91,6,66,4],[91,10,66,8],[92,8,67,6],[92,14,67,12],[93,10,67,14,"user"],[94,8,67,19],[94,9,67,20],[94,12,67,23],[94,18,67,29,"authService"],[94,29,67,40],[94,30,67,40,"default"],[94,37,67,40],[94,38,67,41,"register"],[94,46,67,49],[94,47,67,50,"data"],[94,51,67,54],[94,52,67,55],[95,8,68,6,"setUser"],[95,15,68,13],[95,16,68,14,"user"],[95,20,68,18],[95,21,68,19],[96,6,69,4],[96,7,69,5],[96,8,69,6],[96,15,69,13,"error"],[96,20,69,23],[96,22,69,25],[97,8,70,6],[97,14,70,12],[97,18,70,16,"Error"],[97,23,70,21],[97,24,70,22,"error"],[97,29,70,27],[97,30,70,28,"response"],[97,38,70,36],[97,40,70,38,"data"],[97,44,70,42],[97,46,70,44,"detail"],[97,52,70,50],[97,56,70,54],[97,77,70,75],[97,78,70,76],[98,6,71,4],[99,4,72,2],[99,5,72,3],[100,4,74,2],[100,10,74,8,"logout"],[100,16,74,14],[100,19,74,17],[100,25,74,17,"logout"],[100,26,74,17],[100,31,74,29],[101,6,75,4],[101,12,75,10,"authService"],[101,23,75,21],[101,24,75,21,"default"],[101,31,75,21],[101,32,75,22,"logout"],[101,38,75,28],[101,39,75,29],[101,40,75,30],[102,6,76,4,"storeLogout"],[102,17,76,15],[102,18,76,16],[102,19,76,17],[103,4,77,2],[103,5,77,3],[104,4,79,2],[104,10,79,8,"updateUser"],[104,20,79,18],[104,23,79,22,"updatedUser"],[104,34,79,48],[104,38,79,53],[105,6,80,4],[105,10,80,8,"user"],[105,14,80,12],[105,16,80,14],[106,8,81,6,"setUser"],[106,15,81,13],[106,16,81,13,"Object"],[106,22,81,13],[106,23,81,13,"assign"],[106,29,81,13],[106,34,81,19,"user"],[106,38,81,23],[106,40,81,28,"updatedUser"],[106,51,81,39],[106,52,81,41],[106,53,81,42],[107,6,82,4],[108,4,83,2],[108,5,83,3],[109,4,85,2],[109,24,86,4],[109,28,86,4,"_reactJsxDevRuntime"],[109,47,86,4],[109,48,86,4,"jsxDEV"],[109,54,86,4],[109,56,86,5,"AuthContext"],[109,67,86,16],[109,68,86,17,"Provider"],[109,76,86,25],[110,6,86,26,"value"],[110,11,86,31],[110,13,86,33],[111,8,86,35,"user"],[111,12,86,39],[112,8,86,41,"isLoading"],[112,17,86,50],[113,8,86,52,"isAuthenticated"],[113,23,86,67],[114,8,86,69,"login"],[114,13,86,74],[115,8,86,76,"register"],[115,16,86,84],[116,8,86,86,"logout"],[116,14,86,92],[117,8,86,94,"updateUser"],[118,6,86,105],[118,7,86,107],[119,6,86,107,"children"],[119,14,86,107],[119,16,87,7,"children"],[120,4,87,15],[121,6,87,15,"fileName"],[121,14,87,15],[121,16,87,15,"_jsxFileName"],[121,28,87,15],[122,6,87,15,"lineNumber"],[122,16,87,15],[123,6,87,15,"columnNumber"],[123,18,87,15],[124,4,87,15],[124,11,88,26],[124,12,88,27],[125,2,90,0],[125,3,90,1],[126,2,90,2,"_s"],[126,4,90,2],[126,5,19,13,"AuthProvider"],[126,17,19,66],[127,4,19,66],[127,12,20,89,"useAuthStore"],[127,27,20,101],[127,28,20,101,"useAuthStore"],[127,40,20,101],[128,2,20,101],[129,2,20,101,"_c"],[129,4,20,101],[129,7,19,13,"AuthProvider"],[129,19,19,66],[130,2,92,7],[130,8,92,13,"useAuth"],[130,15,92,20],[130,18,92,23,"useAuth"],[130,19,92,23],[130,24,92,29],[131,4,92,29,"_s2"],[131,7,92,29],[132,4,93,2],[132,10,93,8,"context"],[132,17,93,15],[132,20,93,18],[132,24,93,18,"useContext"],[132,30,93,28],[132,31,93,28,"useContext"],[132,41,93,28],[132,43,93,29,"AuthContext"],[132,54,93,40],[132,55,93,41],[133,4,94,2],[133,8,94,6],[133,9,94,7,"context"],[133,16,94,14],[133,18,94,16],[134,6,95,4],[134,12,95,10],[134,16,95,14,"Error"],[134,21,95,19],[134,22,95,20],[134,64,95,62],[134,65,95,63],[135,4,96,2],[136,4,97,2],[136,11,97,9,"context"],[136,18,97,16],[137,2,98,0],[137,3,98,1],[138,2,98,2,"_s2"],[138,5,98,2],[138,6,92,13,"useAuth"],[138,13,92,20],[139,2,92,20],[139,6,92,20,"_c"],[139,8,92,20],[140,2,92,20,"$RefreshReg$"],[140,14,92,20],[140,15,92,20,"_c"],[140,17,92,20],[141,0,92,20],[141,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","registerForPushNotificationsAsync._catch$argument_0","register","logout","updateUser","useAuth"],"mappings":"AAA;qECkB;YCI;GDE;oBEE;GFqB;gBGE;gDCO;ODE;GHI;mBKE;GLO;iBME;GNG;qBOE;GPI;CDO;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}