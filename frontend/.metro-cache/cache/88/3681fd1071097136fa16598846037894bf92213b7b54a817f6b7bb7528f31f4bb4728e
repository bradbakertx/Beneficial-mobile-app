{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/auth.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":61,"index":140}}],"key":"OAwOj13pryMi7HegghVkxChHnhI=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":141},"end":{"line":3,"column":50,"index":191}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../services/notifications.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":192},"end":{"line":4,"column":114,"index":306}}],"key":"wN7e6rqBf7ZuKvH36NXG+/TSRnI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesAuthService = require(_dependencyMap[1], \"../services/auth.service\");\n  var authService = _interopDefault(_servicesAuthService);\n  var _storeAuthStore = require(_dependencyMap[2], \"../store/authStore\");\n  var _servicesNotificationsService = require(_dependencyMap[3], \"../services/notifications.service\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const {\n      user,\n      isLoading,\n      isAuthenticated,\n      setUser,\n      setLoading,\n      logout: storeLogout\n    } = (0, _storeAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        setLoading(true);\n        const token = await authService.default.getToken();\n        if (token) {\n          const currentUser = await authService.default.getCurrentUser();\n          if (currentUser) {\n            setUser(currentUser);\n          } else {\n            setUser(null);\n          }\n        } else {\n          setUser(null);\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password, stayLoggedIn = true) => {\n      try {\n        const {\n          user\n        } = await authService.default.login({\n          email,\n          password\n        }, stayLoggedIn);\n        setUser(user);\n\n        // Register for push notifications after successful login\n        // Note: Push notifications work via device tokens and persist even when logged out\n        (0, _servicesNotificationsService.registerForPushNotificationsAsync)().catch(error => {\n          console.error('Failed to register for push notifications:', error);\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async data => {\n      try {\n        const {\n          user\n        } = await authService.default.register(data);\n        setUser(user);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await authService.default.logout();\n      storeLogout();\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"1WMNXmMClNBWhtYWBsc1Azwbups=\", false, function () {\n    return [_storeAuthStore.useAuthStore];\n  });\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":134,"map":[[15,2,17,0,"Object"],[15,8,17,0],[15,9,17,0,"defineProperty"],[15,23,17,0],[15,24,17,0,"exports"],[15,31,17,0],[16,4,17,0,"enumerable"],[16,14,17,0],[17,4,17,0,"get"],[17,7,17,0],[17,18,17,0,"get"],[17,19,17,0],[18,6,17,0],[18,13,17,0,"AuthProvider"],[18,25,17,0],[19,4,17,0],[20,2,17,0],[21,2,83,0,"Object"],[21,8,83,0],[21,9,83,0,"defineProperty"],[21,23,83,0],[21,24,83,0,"exports"],[21,31,83,0],[22,4,83,0,"enumerable"],[22,14,83,0],[23,4,83,0,"get"],[23,7,83,0],[23,18,83,0,"get"],[23,19,83,0],[24,6,83,0],[24,13,83,0,"useAuth"],[24,20,83,0],[25,4,83,0],[26,2,83,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_servicesAuthService"],[28,26,2,0],[28,29,2,0,"require"],[28,36,2,0],[28,37,2,0,"_dependencyMap"],[28,51,2,0],[29,2,2,0],[29,6,2,0,"authService"],[29,17,2,0],[29,20,2,0,"_interopDefault"],[29,35,2,0],[29,36,2,0,"_servicesAuthService"],[29,56,2,0],[30,2,3,0],[30,6,3,0,"_storeAuthStore"],[30,21,3,0],[30,24,3,0,"require"],[30,31,3,0],[30,32,3,0,"_dependencyMap"],[30,46,3,0],[31,2,4,0],[31,6,4,0,"_servicesNotificationsService"],[31,35,4,0],[31,38,4,0,"require"],[31,45,4,0],[31,46,4,0,"_dependencyMap"],[31,60,4,0],[32,2,4,114],[32,6,4,114,"_reactJsxDevRuntime"],[32,25,4,114],[32,28,4,114,"require"],[32,35,4,114],[32,36,4,114,"_dependencyMap"],[32,50,4,114],[33,2,15,0],[33,8,15,6,"AuthContext"],[33,19,15,17],[33,35,15,20],[33,39,15,20,"createContext"],[33,45,15,33],[33,46,15,33,"createContext"],[33,59,15,33],[33,61,15,63,"undefined"],[33,70,15,72],[33,71,15,73],[34,2,17,7],[34,8,17,13,"AuthProvider"],[34,20,17,66],[34,23,17,69,"AuthProvider"],[34,24,17,70],[35,4,17,72,"children"],[36,2,17,81],[36,3,17,82],[36,8,17,87],[37,4,17,87,"_s"],[37,6,17,87],[38,4,18,2],[38,10,18,8],[39,6,18,10,"user"],[39,10,18,14],[40,6,18,16,"isLoading"],[40,15,18,25],[41,6,18,27,"isAuthenticated"],[41,21,18,42],[42,6,18,44,"setUser"],[42,13,18,51],[43,6,18,53,"setLoading"],[43,16,18,63],[44,6,18,65,"logout"],[44,12,18,71],[44,14,18,73,"storeLogout"],[45,4,18,85],[45,5,18,86],[45,8,18,89],[45,12,18,89,"useAuthStore"],[45,27,18,101],[45,28,18,101,"useAuthStore"],[45,40,18,101],[45,42,18,102],[45,43,18,103],[46,4,20,2],[46,8,20,2,"useEffect"],[46,14,20,11],[46,15,20,11,"useEffect"],[46,24,20,11],[46,26,20,12],[46,32,20,18],[47,6,21,4,"checkAuth"],[47,15,21,13],[47,16,21,14],[47,17,21,15],[48,4,22,2],[48,5,22,3],[48,7,22,5],[48,9,22,7],[48,10,22,8],[49,4,24,2],[49,10,24,8,"checkAuth"],[49,19,24,17],[49,22,24,20],[49,28,24,20,"checkAuth"],[49,29,24,20],[49,34,24,32],[50,6,25,4],[50,10,25,8],[51,8,26,6,"setLoading"],[51,18,26,16],[51,19,26,17],[51,23,26,21],[51,24,26,22],[52,8,27,6],[52,14,27,12,"token"],[52,19,27,17],[52,22,27,20],[52,28,27,26,"authService"],[52,39,27,37],[52,40,27,37,"default"],[52,47,27,37],[52,48,27,38,"getToken"],[52,56,27,46],[52,57,27,47],[52,58,27,48],[53,8,29,6],[53,12,29,10,"token"],[53,17,29,15],[53,19,29,17],[54,10,30,8],[54,16,30,14,"currentUser"],[54,27,30,25],[54,30,30,28],[54,36,30,34,"authService"],[54,47,30,45],[54,48,30,45,"default"],[54,55,30,45],[54,56,30,46,"getCurrentUser"],[54,70,30,60],[54,71,30,61],[54,72,30,62],[55,10,31,8],[55,14,31,12,"currentUser"],[55,25,31,23],[55,27,31,25],[56,12,32,10,"setUser"],[56,19,32,17],[56,20,32,18,"currentUser"],[56,31,32,29],[56,32,32,30],[57,10,33,8],[57,11,33,9],[57,17,33,15],[58,12,34,10,"setUser"],[58,19,34,17],[58,20,34,18],[58,24,34,22],[58,25,34,23],[59,10,35,8],[60,8,36,6],[60,9,36,7],[60,15,36,13],[61,10,37,8,"setUser"],[61,17,37,15],[61,18,37,16],[61,22,37,20],[61,23,37,21],[62,8,38,6],[63,6,39,4],[63,7,39,5],[63,8,39,6],[63,15,39,13,"error"],[63,20,39,18],[63,22,39,20],[64,8,40,6,"console"],[64,15,40,13],[64,16,40,14,"error"],[64,21,40,19],[64,22,40,20],[64,41,40,39],[64,43,40,41,"error"],[64,48,40,46],[64,49,40,47],[65,8,41,6,"setUser"],[65,15,41,13],[65,16,41,14],[65,20,41,18],[65,21,41,19],[66,6,42,4],[66,7,42,5],[66,16,42,14],[67,8,43,6,"setLoading"],[67,18,43,16],[67,19,43,17],[67,24,43,22],[67,25,43,23],[68,6,44,4],[69,4,45,2],[69,5,45,3],[70,4,47,2],[70,10,47,8,"login"],[70,15,47,13],[70,18,47,16],[70,24,47,16,"login"],[70,25,47,23,"email"],[70,30,47,36],[70,32,47,38,"password"],[70,40,47,54],[70,42,47,56,"stayLoggedIn"],[70,54,47,77],[70,57,47,80],[70,61,47,84],[70,66,47,89],[71,6,48,4],[71,10,48,8],[72,8,49,6],[72,14,49,12],[73,10,49,14,"user"],[74,8,49,19],[74,9,49,20],[74,12,49,23],[74,18,49,29,"authService"],[74,29,49,40],[74,30,49,40,"default"],[74,37,49,40],[74,38,49,41,"login"],[74,43,49,46],[74,44,49,47],[75,10,49,49,"email"],[75,15,49,54],[76,10,49,56,"password"],[77,8,49,65],[77,9,49,66],[77,11,49,68,"stayLoggedIn"],[77,23,49,80],[77,24,49,81],[78,8,50,6,"setUser"],[78,15,50,13],[78,16,50,14,"user"],[78,20,50,18],[78,21,50,19],[80,8,52,6],[81,8,53,6],[82,8,54,6],[82,12,54,6,"registerForPushNotificationsAsync"],[82,41,54,39],[82,42,54,39,"registerForPushNotificationsAsync"],[82,75,54,39],[82,77,54,40],[82,78,54,41],[82,79,54,42,"catch"],[82,84,54,47],[82,85,54,49,"error"],[82,90,54,54],[82,94,54,59],[83,10,55,8,"console"],[83,17,55,15],[83,18,55,16,"error"],[83,23,55,21],[83,24,55,22],[83,68,55,66],[83,70,55,68,"error"],[83,75,55,73],[83,76,55,74],[84,8,56,6],[84,9,56,7],[84,10,56,8],[85,6,57,4],[85,7,57,5],[85,8,57,6],[85,15,57,13,"error"],[85,20,57,23],[85,22,57,25],[86,8,58,6],[86,14,58,12],[86,18,58,16,"Error"],[86,23,58,21],[86,24,58,22,"error"],[86,29,58,27],[86,30,58,28,"response"],[86,38,58,36],[86,40,58,38,"data"],[86,44,58,42],[86,46,58,44,"detail"],[86,52,58,50],[86,56,58,54],[86,70,58,68],[86,71,58,69],[87,6,59,4],[88,4,60,2],[88,5,60,3],[89,4,62,2],[89,10,62,8,"register"],[89,18,62,16],[89,21,62,19],[89,27,62,26,"data"],[89,31,62,35],[89,35,62,40],[90,6,63,4],[90,10,63,8],[91,8,64,6],[91,14,64,12],[92,10,64,14,"user"],[93,8,64,19],[93,9,64,20],[93,12,64,23],[93,18,64,29,"authService"],[93,29,64,40],[93,30,64,40,"default"],[93,37,64,40],[93,38,64,41,"register"],[93,46,64,49],[93,47,64,50,"data"],[93,51,64,54],[93,52,64,55],[94,8,65,6,"setUser"],[94,15,65,13],[94,16,65,14,"user"],[94,20,65,18],[94,21,65,19],[95,6,66,4],[95,7,66,5],[95,8,66,6],[95,15,66,13,"error"],[95,20,66,23],[95,22,66,25],[96,8,67,6],[96,14,67,12],[96,18,67,16,"Error"],[96,23,67,21],[96,24,67,22,"error"],[96,29,67,27],[96,30,67,28,"response"],[96,38,67,36],[96,40,67,38,"data"],[96,44,67,42],[96,46,67,44,"detail"],[96,52,67,50],[96,56,67,54],[96,77,67,75],[96,78,67,76],[97,6,68,4],[98,4,69,2],[98,5,69,3],[99,4,71,2],[99,10,71,8,"logout"],[99,16,71,14],[99,19,71,17],[99,25,71,17,"logout"],[99,26,71,17],[99,31,71,29],[100,6,72,4],[100,12,72,10,"authService"],[100,23,72,21],[100,24,72,21,"default"],[100,31,72,21],[100,32,72,22,"logout"],[100,38,72,28],[100,39,72,29],[100,40,72,30],[101,6,73,4,"storeLogout"],[101,17,73,15],[101,18,73,16],[101,19,73,17],[102,4,74,2],[102,5,74,3],[103,4,76,2],[103,24,77,4],[103,28,77,4,"_reactJsxDevRuntime"],[103,47,77,4],[103,48,77,4,"jsxDEV"],[103,54,77,4],[103,56,77,5,"AuthContext"],[103,67,77,16],[103,68,77,17,"Provider"],[103,76,77,25],[104,6,77,26,"value"],[104,11,77,31],[104,13,77,33],[105,8,77,35,"user"],[105,12,77,39],[106,8,77,41,"isLoading"],[106,17,77,50],[107,8,77,52,"isAuthenticated"],[107,23,77,67],[108,8,77,69,"login"],[108,13,77,74],[109,8,77,76,"register"],[109,16,77,84],[110,8,77,86,"logout"],[111,6,77,93],[111,7,77,95],[112,6,77,95,"children"],[112,14,77,95],[112,16,78,7,"children"],[113,4,78,15],[114,6,78,15,"fileName"],[114,14,78,15],[114,16,78,15,"_jsxFileName"],[114,28,78,15],[115,6,78,15,"lineNumber"],[115,16,78,15],[116,6,78,15,"columnNumber"],[116,18,78,15],[117,4,78,15],[117,11,79,26],[117,12,79,27],[118,2,81,0],[118,3,81,1],[119,2,81,2,"_s"],[119,4,81,2],[119,5,17,13,"AuthProvider"],[119,17,17,66],[120,4,17,66],[120,12,18,89,"useAuthStore"],[120,27,18,101],[120,28,18,101,"useAuthStore"],[120,40,18,101],[121,2,18,101],[122,2,18,101,"_c"],[122,4,18,101],[122,7,17,13,"AuthProvider"],[122,19,17,66],[123,2,83,7],[123,8,83,13,"useAuth"],[123,15,83,20],[123,18,83,23,"useAuth"],[123,19,83,23],[123,24,83,29],[124,4,83,29,"_s2"],[124,7,83,29],[125,4,84,2],[125,10,84,8,"context"],[125,17,84,15],[125,20,84,18],[125,24,84,18,"useContext"],[125,30,84,28],[125,31,84,28,"useContext"],[125,41,84,28],[125,43,84,29,"AuthContext"],[125,54,84,40],[125,55,84,41],[126,4,85,2],[126,8,85,6],[126,9,85,7,"context"],[126,16,85,14],[126,18,85,16],[127,6,86,4],[127,12,86,10],[127,16,86,14,"Error"],[127,21,86,19],[127,22,86,20],[127,64,86,62],[127,65,86,63],[128,4,87,2],[129,4,88,2],[129,11,88,9,"context"],[129,18,88,16],[130,2,89,0],[130,3,89,1],[131,2,89,2,"_s2"],[131,5,89,2],[131,6,83,13,"useAuth"],[131,13,83,20],[132,2,83,20],[132,6,83,20,"_c"],[132,8,83,20],[133,2,83,20,"$RefreshReg$"],[133,14,83,20],[133,15,83,20,"_c"],[133,17,83,20],[134,0,83,20],[134,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","registerForPushNotificationsAsync._catch$argument_0","register","logout","useAuth"],"mappings":"AAA;qECgB;YCG;GDE;oBEE;GFqB;gBGE;gDCO;ODE;GHI;mBKE;GLO;iBME;GNG;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}