{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/auth.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":61,"index":140}}],"key":"OAwOj13pryMi7HegghVkxChHnhI=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":141},"end":{"line":3,"column":50,"index":191}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../services/notifications.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":192},"end":{"line":4,"column":114,"index":306}}],"key":"wN7e6rqBf7ZuKvH36NXG+/TSRnI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesAuthService = require(_dependencyMap[1], \"../services/auth.service\");\n  var authService = _interopDefault(_servicesAuthService);\n  var _storeAuthStore = require(_dependencyMap[2], \"../store/authStore\");\n  var _servicesNotificationsService = require(_dependencyMap[3], \"../services/notifications.service\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const {\n      user,\n      isLoading,\n      isAuthenticated,\n      setUser,\n      setLoading,\n      logout: storeLogout\n    } = (0, _storeAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        setLoading(true);\n        const token = await authService.default.getToken();\n        if (token) {\n          const currentUser = await authService.default.getCurrentUser();\n          if (currentUser) {\n            setUser(currentUser);\n          } else {\n            setUser(null);\n          }\n        } else {\n          setUser(null);\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const {\n          user\n        } = await authService.default.login({\n          email,\n          password\n        });\n        setUser(user);\n\n        // Register for push notifications after successful login\n        (0, _servicesNotificationsService.registerForPushNotificationsAsync)().catch(error => {\n          console.error('Failed to register for push notifications:', error);\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async data => {\n      try {\n        const {\n          user\n        } = await authService.default.register(data);\n        setUser(user);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await authService.default.logout();\n      storeLogout();\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":122,"map":[[13,2,17,0,"Object"],[13,8,17,0],[13,9,17,0,"defineProperty"],[13,23,17,0],[13,24,17,0,"exports"],[13,31,17,0],[14,4,17,0,"enumerable"],[14,14,17,0],[15,4,17,0,"get"],[15,7,17,0],[15,18,17,0,"get"],[15,19,17,0],[16,6,17,0],[16,13,17,0,"AuthProvider"],[16,25,17,0],[17,4,17,0],[18,2,17,0],[19,2,82,0,"Object"],[19,8,82,0],[19,9,82,0,"defineProperty"],[19,23,82,0],[19,24,82,0,"exports"],[19,31,82,0],[20,4,82,0,"enumerable"],[20,14,82,0],[21,4,82,0,"get"],[21,7,82,0],[21,18,82,0,"get"],[21,19,82,0],[22,6,82,0],[22,13,82,0,"useAuth"],[22,20,82,0],[23,4,82,0],[24,2,82,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_servicesAuthService"],[26,26,2,0],[26,29,2,0,"require"],[26,36,2,0],[26,37,2,0,"_dependencyMap"],[26,51,2,0],[27,2,2,0],[27,6,2,0,"authService"],[27,17,2,0],[27,20,2,0,"_interopDefault"],[27,35,2,0],[27,36,2,0,"_servicesAuthService"],[27,56,2,0],[28,2,3,0],[28,6,3,0,"_storeAuthStore"],[28,21,3,0],[28,24,3,0,"require"],[28,31,3,0],[28,32,3,0,"_dependencyMap"],[28,46,3,0],[29,2,4,0],[29,6,4,0,"_servicesNotificationsService"],[29,35,4,0],[29,38,4,0,"require"],[29,45,4,0],[29,46,4,0,"_dependencyMap"],[29,60,4,0],[30,2,4,114],[30,6,4,114,"_reactJsxDevRuntime"],[30,25,4,114],[30,28,4,114,"require"],[30,35,4,114],[30,36,4,114,"_dependencyMap"],[30,50,4,114],[31,2,15,0],[31,8,15,6,"AuthContext"],[31,19,15,17],[31,35,15,20],[31,39,15,20,"createContext"],[31,45,15,33],[31,46,15,33,"createContext"],[31,59,15,33],[31,61,15,63,"undefined"],[31,70,15,72],[31,71,15,73],[32,2,17,7],[32,8,17,13,"AuthProvider"],[32,20,17,66],[32,23,17,69,"AuthProvider"],[32,24,17,70],[33,4,17,72,"children"],[34,2,17,81],[34,3,17,82],[34,8,17,87],[35,4,18,2],[35,10,18,8],[36,6,18,10,"user"],[36,10,18,14],[37,6,18,16,"isLoading"],[37,15,18,25],[38,6,18,27,"isAuthenticated"],[38,21,18,42],[39,6,18,44,"setUser"],[39,13,18,51],[40,6,18,53,"setLoading"],[40,16,18,63],[41,6,18,65,"logout"],[41,12,18,71],[41,14,18,73,"storeLogout"],[42,4,18,85],[42,5,18,86],[42,8,18,89],[42,12,18,89,"useAuthStore"],[42,27,18,101],[42,28,18,101,"useAuthStore"],[42,40,18,101],[42,42,18,102],[42,43,18,103],[43,4,20,2],[43,8,20,2,"useEffect"],[43,14,20,11],[43,15,20,11,"useEffect"],[43,24,20,11],[43,26,20,12],[43,32,20,18],[44,6,21,4,"checkAuth"],[44,15,21,13],[44,16,21,14],[44,17,21,15],[45,4,22,2],[45,5,22,3],[45,7,22,5],[45,9,22,7],[45,10,22,8],[46,4,24,2],[46,10,24,8,"checkAuth"],[46,19,24,17],[46,22,24,20],[46,28,24,20,"checkAuth"],[46,29,24,20],[46,34,24,32],[47,6,25,4],[47,10,25,8],[48,8,26,6,"setLoading"],[48,18,26,16],[48,19,26,17],[48,23,26,21],[48,24,26,22],[49,8,27,6],[49,14,27,12,"token"],[49,19,27,17],[49,22,27,20],[49,28,27,26,"authService"],[49,39,27,37],[49,40,27,37,"default"],[49,47,27,37],[49,48,27,38,"getToken"],[49,56,27,46],[49,57,27,47],[49,58,27,48],[50,8,29,6],[50,12,29,10,"token"],[50,17,29,15],[50,19,29,17],[51,10,30,8],[51,16,30,14,"currentUser"],[51,27,30,25],[51,30,30,28],[51,36,30,34,"authService"],[51,47,30,45],[51,48,30,45,"default"],[51,55,30,45],[51,56,30,46,"getCurrentUser"],[51,70,30,60],[51,71,30,61],[51,72,30,62],[52,10,31,8],[52,14,31,12,"currentUser"],[52,25,31,23],[52,27,31,25],[53,12,32,10,"setUser"],[53,19,32,17],[53,20,32,18,"currentUser"],[53,31,32,29],[53,32,32,30],[54,10,33,8],[54,11,33,9],[54,17,33,15],[55,12,34,10,"setUser"],[55,19,34,17],[55,20,34,18],[55,24,34,22],[55,25,34,23],[56,10,35,8],[57,8,36,6],[57,9,36,7],[57,15,36,13],[58,10,37,8,"setUser"],[58,17,37,15],[58,18,37,16],[58,22,37,20],[58,23,37,21],[59,8,38,6],[60,6,39,4],[60,7,39,5],[60,8,39,6],[60,15,39,13,"error"],[60,20,39,18],[60,22,39,20],[61,8,40,6,"console"],[61,15,40,13],[61,16,40,14,"error"],[61,21,40,19],[61,22,40,20],[61,41,40,39],[61,43,40,41,"error"],[61,48,40,46],[61,49,40,47],[62,8,41,6,"setUser"],[62,15,41,13],[62,16,41,14],[62,20,41,18],[62,21,41,19],[63,6,42,4],[63,7,42,5],[63,16,42,14],[64,8,43,6,"setLoading"],[64,18,43,16],[64,19,43,17],[64,24,43,22],[64,25,43,23],[65,6,44,4],[66,4,45,2],[66,5,45,3],[67,4,47,2],[67,10,47,8,"login"],[67,15,47,13],[67,18,47,16],[67,24,47,16,"login"],[67,25,47,23,"email"],[67,30,47,36],[67,32,47,38,"password"],[67,40,47,54],[67,45,47,59],[68,6,48,4],[68,10,48,8],[69,8,49,6],[69,14,49,12],[70,10,49,14,"user"],[71,8,49,19],[71,9,49,20],[71,12,49,23],[71,18,49,29,"authService"],[71,29,49,40],[71,30,49,40,"default"],[71,37,49,40],[71,38,49,41,"login"],[71,43,49,46],[71,44,49,47],[72,10,49,49,"email"],[72,15,49,54],[73,10,49,56,"password"],[74,8,49,65],[74,9,49,66],[74,10,49,67],[75,8,50,6,"setUser"],[75,15,50,13],[75,16,50,14,"user"],[75,20,50,18],[75,21,50,19],[77,8,52,6],[78,8,53,6],[78,12,53,6,"registerForPushNotificationsAsync"],[78,41,53,39],[78,42,53,39,"registerForPushNotificationsAsync"],[78,75,53,39],[78,77,53,40],[78,78,53,41],[78,79,53,42,"catch"],[78,84,53,47],[78,85,53,49,"error"],[78,90,53,54],[78,94,53,59],[79,10,54,8,"console"],[79,17,54,15],[79,18,54,16,"error"],[79,23,54,21],[79,24,54,22],[79,68,54,66],[79,70,54,68,"error"],[79,75,54,73],[79,76,54,74],[80,8,55,6],[80,9,55,7],[80,10,55,8],[81,6,56,4],[81,7,56,5],[81,8,56,6],[81,15,56,13,"error"],[81,20,56,23],[81,22,56,25],[82,8,57,6],[82,14,57,12],[82,18,57,16,"Error"],[82,23,57,21],[82,24,57,22,"error"],[82,29,57,27],[82,30,57,28,"response"],[82,38,57,36],[82,40,57,38,"data"],[82,44,57,42],[82,46,57,44,"detail"],[82,52,57,50],[82,56,57,54],[82,70,57,68],[82,71,57,69],[83,6,58,4],[84,4,59,2],[84,5,59,3],[85,4,61,2],[85,10,61,8,"register"],[85,18,61,16],[85,21,61,19],[85,27,61,26,"data"],[85,31,61,35],[85,35,61,40],[86,6,62,4],[86,10,62,8],[87,8,63,6],[87,14,63,12],[88,10,63,14,"user"],[89,8,63,19],[89,9,63,20],[89,12,63,23],[89,18,63,29,"authService"],[89,29,63,40],[89,30,63,40,"default"],[89,37,63,40],[89,38,63,41,"register"],[89,46,63,49],[89,47,63,50,"data"],[89,51,63,54],[89,52,63,55],[90,8,64,6,"setUser"],[90,15,64,13],[90,16,64,14,"user"],[90,20,64,18],[90,21,64,19],[91,6,65,4],[91,7,65,5],[91,8,65,6],[91,15,65,13,"error"],[91,20,65,23],[91,22,65,25],[92,8,66,6],[92,14,66,12],[92,18,66,16,"Error"],[92,23,66,21],[92,24,66,22,"error"],[92,29,66,27],[92,30,66,28,"response"],[92,38,66,36],[92,40,66,38,"data"],[92,44,66,42],[92,46,66,44,"detail"],[92,52,66,50],[92,56,66,54],[92,77,66,75],[92,78,66,76],[93,6,67,4],[94,4,68,2],[94,5,68,3],[95,4,70,2],[95,10,70,8,"logout"],[95,16,70,14],[95,19,70,17],[95,25,70,17,"logout"],[95,26,70,17],[95,31,70,29],[96,6,71,4],[96,12,71,10,"authService"],[96,23,71,21],[96,24,71,21,"default"],[96,31,71,21],[96,32,71,22,"logout"],[96,38,71,28],[96,39,71,29],[96,40,71,30],[97,6,72,4,"storeLogout"],[97,17,72,15],[97,18,72,16],[97,19,72,17],[98,4,73,2],[98,5,73,3],[99,4,75,2],[99,24,76,4],[99,28,76,4,"_reactJsxDevRuntime"],[99,47,76,4],[99,48,76,4,"jsxDEV"],[99,54,76,4],[99,56,76,5,"AuthContext"],[99,67,76,16],[99,68,76,17,"Provider"],[99,76,76,25],[100,6,76,26,"value"],[100,11,76,31],[100,13,76,33],[101,8,76,35,"user"],[101,12,76,39],[102,8,76,41,"isLoading"],[102,17,76,50],[103,8,76,52,"isAuthenticated"],[103,23,76,67],[104,8,76,69,"login"],[104,13,76,74],[105,8,76,76,"register"],[105,16,76,84],[106,8,76,86,"logout"],[107,6,76,93],[107,7,76,95],[108,6,76,95,"children"],[108,14,76,95],[108,16,77,7,"children"],[109,4,77,15],[110,6,77,15,"fileName"],[110,14,77,15],[110,16,77,15,"_jsxFileName"],[110,28,77,15],[111,6,77,15,"lineNumber"],[111,16,77,15],[112,6,77,15,"columnNumber"],[112,18,77,15],[113,4,77,15],[113,11,78,26],[113,12,78,27],[114,2,80,0],[114,3,80,1],[115,2,82,7],[115,8,82,13,"useAuth"],[115,15,82,20],[115,18,82,23,"useAuth"],[115,19,82,23],[115,24,82,29],[116,4,83,2],[116,10,83,8,"context"],[116,17,83,15],[116,20,83,18],[116,24,83,18,"useContext"],[116,30,83,28],[116,31,83,28,"useContext"],[116,41,83,28],[116,43,83,29,"AuthContext"],[116,54,83,40],[116,55,83,41],[117,4,84,2],[117,8,84,6],[117,9,84,7,"context"],[117,16,84,14],[117,18,84,16],[118,6,85,4],[118,12,85,10],[118,16,85,14,"Error"],[118,21,85,19],[118,22,85,20],[118,64,85,62],[118,65,85,63],[119,4,86,2],[120,4,87,2],[120,11,87,9,"context"],[120,18,87,16],[121,2,88,0],[121,3,88,1],[122,0,88,2],[122,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","registerForPushNotificationsAsync._catch$argument_0","register","logout","useAuth"],"mappings":"AAA;qECgB;YCG;GDE;oBEE;GFqB;gBGE;gDCM;ODE;GHI;mBKE;GLO;iBME;GNG;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}