{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/auth.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":61,"index":140}}],"key":"OAwOj13pryMi7HegghVkxChHnhI=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":141},"end":{"line":3,"column":50,"index":191}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../services/notifications.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":192},"end":{"line":4,"column":114,"index":306}}],"key":"wN7e6rqBf7ZuKvH36NXG+/TSRnI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesAuthService = require(_dependencyMap[1], \"../services/auth.service\");\n  var authService = _interopDefault(_servicesAuthService);\n  var _storeAuthStore = require(_dependencyMap[2], \"../store/authStore\");\n  var _servicesNotificationsService = require(_dependencyMap[3], \"../services/notifications.service\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const {\n      user,\n      isLoading,\n      isAuthenticated,\n      setUser,\n      setLoading,\n      logout: storeLogout\n    } = (0, _storeAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        setLoading(true);\n        const token = await authService.default.getToken();\n        if (token) {\n          const currentUser = await authService.default.getCurrentUser();\n          if (currentUser) {\n            setUser(currentUser);\n          } else {\n            setUser(null);\n          }\n        } else {\n          setUser(null);\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password, stayLoggedIn = true) => {\n      try {\n        const {\n          user\n        } = await authService.default.login({\n          email,\n          password\n        }, stayLoggedIn);\n        setUser(user);\n\n        // Register for push notifications after successful login\n        // Note: Push notifications work via device tokens and persist even when logged out\n        (0, _servicesNotificationsService.registerForPushNotificationsAsync)().catch(error => {\n          console.error('Failed to register for push notifications:', error);\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async data => {\n      try {\n        const {\n          user\n        } = await authService.default.register(data);\n        setUser(user);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await authService.default.logout();\n      storeLogout();\n    };\n    const updateUser = updatedUser => {\n      if (user) {\n        setUser({\n          ...user,\n          ...updatedUser\n        });\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated,\n        login,\n        register,\n        logout,\n        updateUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":132,"map":[[13,2,18,0,"Object"],[13,8,18,0],[13,9,18,0,"defineProperty"],[13,23,18,0],[13,24,18,0,"exports"],[13,31,18,0],[14,4,18,0,"enumerable"],[14,14,18,0],[15,4,18,0,"get"],[15,7,18,0],[15,18,18,0,"get"],[15,19,18,0],[16,6,18,0],[16,13,18,0,"AuthProvider"],[16,25,18,0],[17,4,18,0],[18,2,18,0],[19,2,90,0,"Object"],[19,8,90,0],[19,9,90,0,"defineProperty"],[19,23,90,0],[19,24,90,0,"exports"],[19,31,90,0],[20,4,90,0,"enumerable"],[20,14,90,0],[21,4,90,0,"get"],[21,7,90,0],[21,18,90,0,"get"],[21,19,90,0],[22,6,90,0],[22,13,90,0,"useAuth"],[22,20,90,0],[23,4,90,0],[24,2,90,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_servicesAuthService"],[26,26,2,0],[26,29,2,0,"require"],[26,36,2,0],[26,37,2,0,"_dependencyMap"],[26,51,2,0],[27,2,2,0],[27,6,2,0,"authService"],[27,17,2,0],[27,20,2,0,"_interopDefault"],[27,35,2,0],[27,36,2,0,"_servicesAuthService"],[27,56,2,0],[28,2,3,0],[28,6,3,0,"_storeAuthStore"],[28,21,3,0],[28,24,3,0,"require"],[28,31,3,0],[28,32,3,0,"_dependencyMap"],[28,46,3,0],[29,2,4,0],[29,6,4,0,"_servicesNotificationsService"],[29,35,4,0],[29,38,4,0,"require"],[29,45,4,0],[29,46,4,0,"_dependencyMap"],[29,60,4,0],[30,2,4,114],[30,6,4,114,"_reactJsxDevRuntime"],[30,25,4,114],[30,28,4,114,"require"],[30,35,4,114],[30,36,4,114,"_dependencyMap"],[30,50,4,114],[31,2,16,0],[31,8,16,6,"AuthContext"],[31,19,16,17],[31,35,16,20],[31,39,16,20,"createContext"],[31,45,16,33],[31,46,16,33,"createContext"],[31,59,16,33],[31,61,16,63,"undefined"],[31,70,16,72],[31,71,16,73],[32,2,18,7],[32,8,18,13,"AuthProvider"],[32,20,18,66],[32,23,18,69,"AuthProvider"],[32,24,18,70],[33,4,18,72,"children"],[34,2,18,81],[34,3,18,82],[34,8,18,87],[35,4,19,2],[35,10,19,8],[36,6,19,10,"user"],[36,10,19,14],[37,6,19,16,"isLoading"],[37,15,19,25],[38,6,19,27,"isAuthenticated"],[38,21,19,42],[39,6,19,44,"setUser"],[39,13,19,51],[40,6,19,53,"setLoading"],[40,16,19,63],[41,6,19,65,"logout"],[41,12,19,71],[41,14,19,73,"storeLogout"],[42,4,19,85],[42,5,19,86],[42,8,19,89],[42,12,19,89,"useAuthStore"],[42,27,19,101],[42,28,19,101,"useAuthStore"],[42,40,19,101],[42,42,19,102],[42,43,19,103],[43,4,21,2],[43,8,21,2,"useEffect"],[43,14,21,11],[43,15,21,11,"useEffect"],[43,24,21,11],[43,26,21,12],[43,32,21,18],[44,6,22,4,"checkAuth"],[44,15,22,13],[44,16,22,14],[44,17,22,15],[45,4,23,2],[45,5,23,3],[45,7,23,5],[45,9,23,7],[45,10,23,8],[46,4,25,2],[46,10,25,8,"checkAuth"],[46,19,25,17],[46,22,25,20],[46,28,25,20,"checkAuth"],[46,29,25,20],[46,34,25,32],[47,6,26,4],[47,10,26,8],[48,8,27,6,"setLoading"],[48,18,27,16],[48,19,27,17],[48,23,27,21],[48,24,27,22],[49,8,28,6],[49,14,28,12,"token"],[49,19,28,17],[49,22,28,20],[49,28,28,26,"authService"],[49,39,28,37],[49,40,28,37,"default"],[49,47,28,37],[49,48,28,38,"getToken"],[49,56,28,46],[49,57,28,47],[49,58,28,48],[50,8,30,6],[50,12,30,10,"token"],[50,17,30,15],[50,19,30,17],[51,10,31,8],[51,16,31,14,"currentUser"],[51,27,31,25],[51,30,31,28],[51,36,31,34,"authService"],[51,47,31,45],[51,48,31,45,"default"],[51,55,31,45],[51,56,31,46,"getCurrentUser"],[51,70,31,60],[51,71,31,61],[51,72,31,62],[52,10,32,8],[52,14,32,12,"currentUser"],[52,25,32,23],[52,27,32,25],[53,12,33,10,"setUser"],[53,19,33,17],[53,20,33,18,"currentUser"],[53,31,33,29],[53,32,33,30],[54,10,34,8],[54,11,34,9],[54,17,34,15],[55,12,35,10,"setUser"],[55,19,35,17],[55,20,35,18],[55,24,35,22],[55,25,35,23],[56,10,36,8],[57,8,37,6],[57,9,37,7],[57,15,37,13],[58,10,38,8,"setUser"],[58,17,38,15],[58,18,38,16],[58,22,38,20],[58,23,38,21],[59,8,39,6],[60,6,40,4],[60,7,40,5],[60,8,40,6],[60,15,40,13,"error"],[60,20,40,18],[60,22,40,20],[61,8,41,6,"console"],[61,15,41,13],[61,16,41,14,"error"],[61,21,41,19],[61,22,41,20],[61,41,41,39],[61,43,41,41,"error"],[61,48,41,46],[61,49,41,47],[62,8,42,6,"setUser"],[62,15,42,13],[62,16,42,14],[62,20,42,18],[62,21,42,19],[63,6,43,4],[63,7,43,5],[63,16,43,14],[64,8,44,6,"setLoading"],[64,18,44,16],[64,19,44,17],[64,24,44,22],[64,25,44,23],[65,6,45,4],[66,4,46,2],[66,5,46,3],[67,4,48,2],[67,10,48,8,"login"],[67,15,48,13],[67,18,48,16],[67,24,48,16,"login"],[67,25,48,23,"email"],[67,30,48,36],[67,32,48,38,"password"],[67,40,48,54],[67,42,48,56,"stayLoggedIn"],[67,54,48,77],[67,57,48,80],[67,61,48,84],[67,66,48,89],[68,6,49,4],[68,10,49,8],[69,8,50,6],[69,14,50,12],[70,10,50,14,"user"],[71,8,50,19],[71,9,50,20],[71,12,50,23],[71,18,50,29,"authService"],[71,29,50,40],[71,30,50,40,"default"],[71,37,50,40],[71,38,50,41,"login"],[71,43,50,46],[71,44,50,47],[72,10,50,49,"email"],[72,15,50,54],[73,10,50,56,"password"],[74,8,50,65],[74,9,50,66],[74,11,50,68,"stayLoggedIn"],[74,23,50,80],[74,24,50,81],[75,8,51,6,"setUser"],[75,15,51,13],[75,16,51,14,"user"],[75,20,51,18],[75,21,51,19],[77,8,53,6],[78,8,54,6],[79,8,55,6],[79,12,55,6,"registerForPushNotificationsAsync"],[79,41,55,39],[79,42,55,39,"registerForPushNotificationsAsync"],[79,75,55,39],[79,77,55,40],[79,78,55,41],[79,79,55,42,"catch"],[79,84,55,47],[79,85,55,49,"error"],[79,90,55,54],[79,94,55,59],[80,10,56,8,"console"],[80,17,56,15],[80,18,56,16,"error"],[80,23,56,21],[80,24,56,22],[80,68,56,66],[80,70,56,68,"error"],[80,75,56,73],[80,76,56,74],[81,8,57,6],[81,9,57,7],[81,10,57,8],[82,6,58,4],[82,7,58,5],[82,8,58,6],[82,15,58,13,"error"],[82,20,58,23],[82,22,58,25],[83,8,59,6],[83,14,59,12],[83,18,59,16,"Error"],[83,23,59,21],[83,24,59,22,"error"],[83,29,59,27],[83,30,59,28,"response"],[83,38,59,36],[83,40,59,38,"data"],[83,44,59,42],[83,46,59,44,"detail"],[83,52,59,50],[83,56,59,54],[83,70,59,68],[83,71,59,69],[84,6,60,4],[85,4,61,2],[85,5,61,3],[86,4,63,2],[86,10,63,8,"register"],[86,18,63,16],[86,21,63,19],[86,27,63,26,"data"],[86,31,63,35],[86,35,63,40],[87,6,64,4],[87,10,64,8],[88,8,65,6],[88,14,65,12],[89,10,65,14,"user"],[90,8,65,19],[90,9,65,20],[90,12,65,23],[90,18,65,29,"authService"],[90,29,65,40],[90,30,65,40,"default"],[90,37,65,40],[90,38,65,41,"register"],[90,46,65,49],[90,47,65,50,"data"],[90,51,65,54],[90,52,65,55],[91,8,66,6,"setUser"],[91,15,66,13],[91,16,66,14,"user"],[91,20,66,18],[91,21,66,19],[92,6,67,4],[92,7,67,5],[92,8,67,6],[92,15,67,13,"error"],[92,20,67,23],[92,22,67,25],[93,8,68,6],[93,14,68,12],[93,18,68,16,"Error"],[93,23,68,21],[93,24,68,22,"error"],[93,29,68,27],[93,30,68,28,"response"],[93,38,68,36],[93,40,68,38,"data"],[93,44,68,42],[93,46,68,44,"detail"],[93,52,68,50],[93,56,68,54],[93,77,68,75],[93,78,68,76],[94,6,69,4],[95,4,70,2],[95,5,70,3],[96,4,72,2],[96,10,72,8,"logout"],[96,16,72,14],[96,19,72,17],[96,25,72,17,"logout"],[96,26,72,17],[96,31,72,29],[97,6,73,4],[97,12,73,10,"authService"],[97,23,73,21],[97,24,73,21,"default"],[97,31,73,21],[97,32,73,22,"logout"],[97,38,73,28],[97,39,73,29],[97,40,73,30],[98,6,74,4,"storeLogout"],[98,17,74,15],[98,18,74,16],[98,19,74,17],[99,4,75,2],[99,5,75,3],[100,4,77,2],[100,10,77,8,"updateUser"],[100,20,77,18],[100,23,77,22,"updatedUser"],[100,34,77,48],[100,38,77,53],[101,6,78,4],[101,10,78,8,"user"],[101,14,78,12],[101,16,78,14],[102,8,79,6,"setUser"],[102,15,79,13],[102,16,79,14],[103,10,79,16],[103,13,79,19,"user"],[103,17,79,23],[104,10,79,25],[104,13,79,28,"updatedUser"],[105,8,79,40],[105,9,79,41],[105,10,79,42],[106,6,80,4],[107,4,81,2],[107,5,81,3],[108,4,83,2],[108,24,84,4],[108,28,84,4,"_reactJsxDevRuntime"],[108,47,84,4],[108,48,84,4,"jsxDEV"],[108,54,84,4],[108,56,84,5,"AuthContext"],[108,67,84,16],[108,68,84,17,"Provider"],[108,76,84,25],[109,6,84,26,"value"],[109,11,84,31],[109,13,84,33],[110,8,84,35,"user"],[110,12,84,39],[111,8,84,41,"isLoading"],[111,17,84,50],[112,8,84,52,"isAuthenticated"],[112,23,84,67],[113,8,84,69,"login"],[113,13,84,74],[114,8,84,76,"register"],[114,16,84,84],[115,8,84,86,"logout"],[115,14,84,92],[116,8,84,94,"updateUser"],[117,6,84,105],[117,7,84,107],[118,6,84,107,"children"],[118,14,84,107],[118,16,85,7,"children"],[119,4,85,15],[120,6,85,15,"fileName"],[120,14,85,15],[120,16,85,15,"_jsxFileName"],[120,28,85,15],[121,6,85,15,"lineNumber"],[121,16,85,15],[122,6,85,15,"columnNumber"],[122,18,85,15],[123,4,85,15],[123,11,86,26],[123,12,86,27],[124,2,88,0],[124,3,88,1],[125,2,90,7],[125,8,90,13,"useAuth"],[125,15,90,20],[125,18,90,23,"useAuth"],[125,19,90,23],[125,24,90,29],[126,4,91,2],[126,10,91,8,"context"],[126,17,91,15],[126,20,91,18],[126,24,91,18,"useContext"],[126,30,91,28],[126,31,91,28,"useContext"],[126,41,91,28],[126,43,91,29,"AuthContext"],[126,54,91,40],[126,55,91,41],[127,4,92,2],[127,8,92,6],[127,9,92,7,"context"],[127,16,92,14],[127,18,92,16],[128,6,93,4],[128,12,93,10],[128,16,93,14,"Error"],[128,21,93,19],[128,22,93,20],[128,64,93,62],[128,65,93,63],[129,4,94,2],[130,4,95,2],[130,11,95,9,"context"],[130,18,95,16],[131,2,96,0],[131,3,96,1],[132,0,96,2],[132,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","registerForPushNotificationsAsync._catch$argument_0","register","logout","updateUser","useAuth"],"mappings":"AAA;qECiB;YCG;GDE;oBEE;GFqB;gBGE;gDCO;ODE;GHI;mBKE;GLO;iBME;GNG;qBOE;GPI;CDO;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}