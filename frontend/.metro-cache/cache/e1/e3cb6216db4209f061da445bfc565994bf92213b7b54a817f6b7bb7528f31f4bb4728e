{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/auth.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":61,"index":140}}],"key":"OAwOj13pryMi7HegghVkxChHnhI=","exportNames":["*"],"imports":1}},{"name":"../store/authStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":141},"end":{"line":3,"column":50,"index":191}}],"key":"/4BDl/hqolvw7T4CXD8jWAtZK4M=","exportNames":["*"],"imports":1}},{"name":"../services/notifications.service","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":192},"end":{"line":4,"column":114,"index":306}}],"key":"wN7e6rqBf7ZuKvH36NXG+/TSRnI=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesAuthService = require(_dependencyMap[1], \"../services/auth.service\");\n  var authService = _interopDefault(_servicesAuthService);\n  var _storeAuthStore = require(_dependencyMap[2], \"../store/authStore\");\n  var _servicesNotificationsService = require(_dependencyMap[3], \"../services/notifications.service\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const {\n      user,\n      isLoading,\n      isAuthenticated,\n      setUser,\n      setLoading,\n      logout: storeLogout\n    } = (0, _storeAuthStore.useAuthStore)();\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        setLoading(true);\n        const token = await authService.default.getToken();\n        if (token) {\n          const currentUser = await authService.default.getCurrentUser();\n          if (currentUser) {\n            setUser(currentUser);\n          } else {\n            setUser(null);\n          }\n        } else {\n          setUser(null);\n        }\n      } catch (error) {\n        console.error('Auth check error:', error);\n        setUser(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const login = async (email, password, stayLoggedIn = true) => {\n      try {\n        const {\n          user\n        } = await authService.default.login({\n          email,\n          password\n        }, stayLoggedIn);\n        setUser(user);\n\n        // Register for push notifications after successful login\n        // Note: Push notifications work via device tokens and persist even when logged out\n        (0, _servicesNotificationsService.registerForPushNotificationsAsync)().catch(error => {\n          console.error('Failed to register for push notifications:', error);\n        });\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      }\n    };\n    const register = async data => {\n      try {\n        const {\n          user\n        } = await authService.default.register(data);\n        setUser(user);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      }\n    };\n    const logout = async () => {\n      await authService.default.logout();\n      storeLogout();\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":123,"map":[[13,2,17,0,"Object"],[13,8,17,0],[13,9,17,0,"defineProperty"],[13,23,17,0],[13,24,17,0,"exports"],[13,31,17,0],[14,4,17,0,"enumerable"],[14,14,17,0],[15,4,17,0,"get"],[15,7,17,0],[15,18,17,0,"get"],[15,19,17,0],[16,6,17,0],[16,13,17,0,"AuthProvider"],[16,25,17,0],[17,4,17,0],[18,2,17,0],[19,2,83,0,"Object"],[19,8,83,0],[19,9,83,0,"defineProperty"],[19,23,83,0],[19,24,83,0,"exports"],[19,31,83,0],[20,4,83,0,"enumerable"],[20,14,83,0],[21,4,83,0,"get"],[21,7,83,0],[21,18,83,0,"get"],[21,19,83,0],[22,6,83,0],[22,13,83,0,"useAuth"],[22,20,83,0],[23,4,83,0],[24,2,83,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_servicesAuthService"],[26,26,2,0],[26,29,2,0,"require"],[26,36,2,0],[26,37,2,0,"_dependencyMap"],[26,51,2,0],[27,2,2,0],[27,6,2,0,"authService"],[27,17,2,0],[27,20,2,0,"_interopDefault"],[27,35,2,0],[27,36,2,0,"_servicesAuthService"],[27,56,2,0],[28,2,3,0],[28,6,3,0,"_storeAuthStore"],[28,21,3,0],[28,24,3,0,"require"],[28,31,3,0],[28,32,3,0,"_dependencyMap"],[28,46,3,0],[29,2,4,0],[29,6,4,0,"_servicesNotificationsService"],[29,35,4,0],[29,38,4,0,"require"],[29,45,4,0],[29,46,4,0,"_dependencyMap"],[29,60,4,0],[30,2,4,114],[30,6,4,114,"_reactJsxDevRuntime"],[30,25,4,114],[30,28,4,114,"require"],[30,35,4,114],[30,36,4,114,"_dependencyMap"],[30,50,4,114],[31,2,15,0],[31,8,15,6,"AuthContext"],[31,19,15,17],[31,35,15,20],[31,39,15,20,"createContext"],[31,45,15,33],[31,46,15,33,"createContext"],[31,59,15,33],[31,61,15,63,"undefined"],[31,70,15,72],[31,71,15,73],[32,2,17,7],[32,8,17,13,"AuthProvider"],[32,20,17,66],[32,23,17,69,"AuthProvider"],[32,24,17,70],[33,4,17,72,"children"],[34,2,17,81],[34,3,17,82],[34,8,17,87],[35,4,18,2],[35,10,18,8],[36,6,18,10,"user"],[36,10,18,14],[37,6,18,16,"isLoading"],[37,15,18,25],[38,6,18,27,"isAuthenticated"],[38,21,18,42],[39,6,18,44,"setUser"],[39,13,18,51],[40,6,18,53,"setLoading"],[40,16,18,63],[41,6,18,65,"logout"],[41,12,18,71],[41,14,18,73,"storeLogout"],[42,4,18,85],[42,5,18,86],[42,8,18,89],[42,12,18,89,"useAuthStore"],[42,27,18,101],[42,28,18,101,"useAuthStore"],[42,40,18,101],[42,42,18,102],[42,43,18,103],[43,4,20,2],[43,8,20,2,"useEffect"],[43,14,20,11],[43,15,20,11,"useEffect"],[43,24,20,11],[43,26,20,12],[43,32,20,18],[44,6,21,4,"checkAuth"],[44,15,21,13],[44,16,21,14],[44,17,21,15],[45,4,22,2],[45,5,22,3],[45,7,22,5],[45,9,22,7],[45,10,22,8],[46,4,24,2],[46,10,24,8,"checkAuth"],[46,19,24,17],[46,22,24,20],[46,28,24,20,"checkAuth"],[46,29,24,20],[46,34,24,32],[47,6,25,4],[47,10,25,8],[48,8,26,6,"setLoading"],[48,18,26,16],[48,19,26,17],[48,23,26,21],[48,24,26,22],[49,8,27,6],[49,14,27,12,"token"],[49,19,27,17],[49,22,27,20],[49,28,27,26,"authService"],[49,39,27,37],[49,40,27,37,"default"],[49,47,27,37],[49,48,27,38,"getToken"],[49,56,27,46],[49,57,27,47],[49,58,27,48],[50,8,29,6],[50,12,29,10,"token"],[50,17,29,15],[50,19,29,17],[51,10,30,8],[51,16,30,14,"currentUser"],[51,27,30,25],[51,30,30,28],[51,36,30,34,"authService"],[51,47,30,45],[51,48,30,45,"default"],[51,55,30,45],[51,56,30,46,"getCurrentUser"],[51,70,30,60],[51,71,30,61],[51,72,30,62],[52,10,31,8],[52,14,31,12,"currentUser"],[52,25,31,23],[52,27,31,25],[53,12,32,10,"setUser"],[53,19,32,17],[53,20,32,18,"currentUser"],[53,31,32,29],[53,32,32,30],[54,10,33,8],[54,11,33,9],[54,17,33,15],[55,12,34,10,"setUser"],[55,19,34,17],[55,20,34,18],[55,24,34,22],[55,25,34,23],[56,10,35,8],[57,8,36,6],[57,9,36,7],[57,15,36,13],[58,10,37,8,"setUser"],[58,17,37,15],[58,18,37,16],[58,22,37,20],[58,23,37,21],[59,8,38,6],[60,6,39,4],[60,7,39,5],[60,8,39,6],[60,15,39,13,"error"],[60,20,39,18],[60,22,39,20],[61,8,40,6,"console"],[61,15,40,13],[61,16,40,14,"error"],[61,21,40,19],[61,22,40,20],[61,41,40,39],[61,43,40,41,"error"],[61,48,40,46],[61,49,40,47],[62,8,41,6,"setUser"],[62,15,41,13],[62,16,41,14],[62,20,41,18],[62,21,41,19],[63,6,42,4],[63,7,42,5],[63,16,42,14],[64,8,43,6,"setLoading"],[64,18,43,16],[64,19,43,17],[64,24,43,22],[64,25,43,23],[65,6,44,4],[66,4,45,2],[66,5,45,3],[67,4,47,2],[67,10,47,8,"login"],[67,15,47,13],[67,18,47,16],[67,24,47,16,"login"],[67,25,47,23,"email"],[67,30,47,36],[67,32,47,38,"password"],[67,40,47,54],[67,42,47,56,"stayLoggedIn"],[67,54,47,77],[67,57,47,80],[67,61,47,84],[67,66,47,89],[68,6,48,4],[68,10,48,8],[69,8,49,6],[69,14,49,12],[70,10,49,14,"user"],[71,8,49,19],[71,9,49,20],[71,12,49,23],[71,18,49,29,"authService"],[71,29,49,40],[71,30,49,40,"default"],[71,37,49,40],[71,38,49,41,"login"],[71,43,49,46],[71,44,49,47],[72,10,49,49,"email"],[72,15,49,54],[73,10,49,56,"password"],[74,8,49,65],[74,9,49,66],[74,11,49,68,"stayLoggedIn"],[74,23,49,80],[74,24,49,81],[75,8,50,6,"setUser"],[75,15,50,13],[75,16,50,14,"user"],[75,20,50,18],[75,21,50,19],[77,8,52,6],[78,8,53,6],[79,8,54,6],[79,12,54,6,"registerForPushNotificationsAsync"],[79,41,54,39],[79,42,54,39,"registerForPushNotificationsAsync"],[79,75,54,39],[79,77,54,40],[79,78,54,41],[79,79,54,42,"catch"],[79,84,54,47],[79,85,54,49,"error"],[79,90,54,54],[79,94,54,59],[80,10,55,8,"console"],[80,17,55,15],[80,18,55,16,"error"],[80,23,55,21],[80,24,55,22],[80,68,55,66],[80,70,55,68,"error"],[80,75,55,73],[80,76,55,74],[81,8,56,6],[81,9,56,7],[81,10,56,8],[82,6,57,4],[82,7,57,5],[82,8,57,6],[82,15,57,13,"error"],[82,20,57,23],[82,22,57,25],[83,8,58,6],[83,14,58,12],[83,18,58,16,"Error"],[83,23,58,21],[83,24,58,22,"error"],[83,29,58,27],[83,30,58,28,"response"],[83,38,58,36],[83,40,58,38,"data"],[83,44,58,42],[83,46,58,44,"detail"],[83,52,58,50],[83,56,58,54],[83,70,58,68],[83,71,58,69],[84,6,59,4],[85,4,60,2],[85,5,60,3],[86,4,62,2],[86,10,62,8,"register"],[86,18,62,16],[86,21,62,19],[86,27,62,26,"data"],[86,31,62,35],[86,35,62,40],[87,6,63,4],[87,10,63,8],[88,8,64,6],[88,14,64,12],[89,10,64,14,"user"],[90,8,64,19],[90,9,64,20],[90,12,64,23],[90,18,64,29,"authService"],[90,29,64,40],[90,30,64,40,"default"],[90,37,64,40],[90,38,64,41,"register"],[90,46,64,49],[90,47,64,50,"data"],[90,51,64,54],[90,52,64,55],[91,8,65,6,"setUser"],[91,15,65,13],[91,16,65,14,"user"],[91,20,65,18],[91,21,65,19],[92,6,66,4],[92,7,66,5],[92,8,66,6],[92,15,66,13,"error"],[92,20,66,23],[92,22,66,25],[93,8,67,6],[93,14,67,12],[93,18,67,16,"Error"],[93,23,67,21],[93,24,67,22,"error"],[93,29,67,27],[93,30,67,28,"response"],[93,38,67,36],[93,40,67,38,"data"],[93,44,67,42],[93,46,67,44,"detail"],[93,52,67,50],[93,56,67,54],[93,77,67,75],[93,78,67,76],[94,6,68,4],[95,4,69,2],[95,5,69,3],[96,4,71,2],[96,10,71,8,"logout"],[96,16,71,14],[96,19,71,17],[96,25,71,17,"logout"],[96,26,71,17],[96,31,71,29],[97,6,72,4],[97,12,72,10,"authService"],[97,23,72,21],[97,24,72,21,"default"],[97,31,72,21],[97,32,72,22,"logout"],[97,38,72,28],[97,39,72,29],[97,40,72,30],[98,6,73,4,"storeLogout"],[98,17,73,15],[98,18,73,16],[98,19,73,17],[99,4,74,2],[99,5,74,3],[100,4,76,2],[100,24,77,4],[100,28,77,4,"_reactJsxDevRuntime"],[100,47,77,4],[100,48,77,4,"jsxDEV"],[100,54,77,4],[100,56,77,5,"AuthContext"],[100,67,77,16],[100,68,77,17,"Provider"],[100,76,77,25],[101,6,77,26,"value"],[101,11,77,31],[101,13,77,33],[102,8,77,35,"user"],[102,12,77,39],[103,8,77,41,"isLoading"],[103,17,77,50],[104,8,77,52,"isAuthenticated"],[104,23,77,67],[105,8,77,69,"login"],[105,13,77,74],[106,8,77,76,"register"],[106,16,77,84],[107,8,77,86,"logout"],[108,6,77,93],[108,7,77,95],[109,6,77,95,"children"],[109,14,77,95],[109,16,78,7,"children"],[110,4,78,15],[111,6,78,15,"fileName"],[111,14,78,15],[111,16,78,15,"_jsxFileName"],[111,28,78,15],[112,6,78,15,"lineNumber"],[112,16,78,15],[113,6,78,15,"columnNumber"],[113,18,78,15],[114,4,78,15],[114,11,79,26],[114,12,79,27],[115,2,81,0],[115,3,81,1],[116,2,83,7],[116,8,83,13,"useAuth"],[116,15,83,20],[116,18,83,23,"useAuth"],[116,19,83,23],[116,24,83,29],[117,4,84,2],[117,10,84,8,"context"],[117,17,84,15],[117,20,84,18],[117,24,84,18,"useContext"],[117,30,84,28],[117,31,84,28,"useContext"],[117,41,84,28],[117,43,84,29,"AuthContext"],[117,54,84,40],[117,55,84,41],[118,4,85,2],[118,8,85,6],[118,9,85,7,"context"],[118,16,85,14],[118,18,85,16],[119,6,86,4],[119,12,86,10],[119,16,86,14,"Error"],[119,21,86,19],[119,22,86,20],[119,64,86,62],[119,65,86,63],[120,4,87,2],[121,4,88,2],[121,11,88,9,"context"],[121,18,88,16],[122,2,89,0],[122,3,89,1],[123,0,89,2],[123,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuth","login","registerForPushNotificationsAsync._catch$argument_0","register","logout","useAuth"],"mappings":"AAA;qECgB;YCG;GDE;oBEE;GFqB;gBGE;gDCO;ODE;GHI;mBKE;GLO;iBME;GNG;CDO;uBQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}