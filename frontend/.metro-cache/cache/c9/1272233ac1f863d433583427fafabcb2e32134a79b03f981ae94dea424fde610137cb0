{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":38,"index":91}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":92},"end":{"line":3,"column":40,"index":132}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":133},"end":{"line":4,"column":24,"index":157}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.registerForPushNotificationsAsync = registerForPushNotificationsAsync;\n  exports.setupNotificationListeners = setupNotificationListeners;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoNotifications = require(_dependencyMap[1], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[2], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var _api = require(_dependencyMap[4], \"./api\");\n  var api = _interopDefault(_api);\n  // Configure how notifications are handled when app is in foreground\n  Notifications.setNotificationHandler({\n    handleNotification: function () {\n      var _ref = (0, _asyncToGenerator.default)(function* () {\n        return {\n          shouldShowAlert: true,\n          shouldPlaySound: true,\n          shouldSetBadge: true\n        };\n      });\n      return function handleNotification() {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  });\n  function registerForPushNotificationsAsync() {\n    return _registerForPushNotificationsAsync.apply(this, arguments);\n  }\n  function _registerForPushNotificationsAsync() {\n    _registerForPushNotificationsAsync = (0, _asyncToGenerator.default)(function* () {\n      var token = null;\n      if (_reactNative.Platform.OS === 'web') {\n        console.log('Push notifications not supported on web');\n        return null;\n      }\n      if (!Device.isDevice) {\n        console.log('Must use physical device for Push Notifications');\n        return null;\n      }\n      try {\n        var _yield$Notifications$ = yield Notifications.getPermissionsAsync(),\n          existingStatus = _yield$Notifications$.status;\n        var finalStatus = existingStatus;\n        if (existingStatus !== 'granted') {\n          var _yield$Notifications$2 = yield Notifications.requestPermissionsAsync(),\n            status = _yield$Notifications$2.status;\n          finalStatus = status;\n        }\n        if (finalStatus !== 'granted') {\n          console.log('Failed to get push token for push notification!');\n          return null;\n        }\n        token = (yield Notifications.getExpoPushTokenAsync()).data;\n        console.log('Push token:', token);\n\n        // Register token with backend\n        yield api.default.post('/auth/register-push-token', null, {\n          params: {\n            push_token: token\n          }\n        });\n        console.log('Push token registered with backend');\n      } catch (error) {\n        console.error('Error registering for push notifications:', error);\n      }\n      if (_reactNative.Platform.OS === 'android') {\n        Notifications.setNotificationChannelAsync('default', {\n          name: 'default',\n          importance: Notifications.AndroidImportance.MAX,\n          vibrationPattern: [0, 250, 250, 250],\n          lightColor: '#FF231F7C'\n        });\n      }\n      return token;\n    });\n    return _registerForPushNotificationsAsync.apply(this, arguments);\n  }\n  function setupNotificationListeners() {\n    // Handle notification received while app is in foreground\n    var notificationListener = Notifications.addNotificationReceivedListener(notification => {\n      console.log('Notification received:', notification);\n    });\n\n    // Handle notification tapped\n    var responseListener = Notifications.addNotificationResponseReceivedListener(response => {\n      console.log('Notification tapped:', response);\n      var data = response.notification.request.content.data;\n\n      // Handle navigation based on notification type\n      if (data.type === 'new_quote') {\n        // Navigate to quotes\n      } else if (data.type === 'new_inspection') {\n        // Navigate to inspections\n      } else if (data.type === 'new_message') {\n        // Navigate to chat\n      }\n    });\n    return {\n      notificationListener,\n      responseListener\n    };\n  }\n});","lineCount":130,"map":[[27,2,15,0,"exports"],[27,9,15,0],[27,10,15,0,"registerForPushNotificationsAsync"],[27,43,15,0],[27,46,15,0,"registerForPushNotificationsAsync"],[27,79,15,0],[28,2,67,0,"exports"],[28,9,67,0],[28,10,67,0,"setupNotificationListeners"],[28,36,67,0],[28,39,67,0,"setupNotificationListeners"],[28,65,67,0],[29,2,92,1],[29,6,92,1,"_babelRuntimeHelpersAsyncToGenerator"],[29,42,92,1],[29,45,92,1,"require"],[29,52,92,1],[29,53,92,1,"_dependencyMap"],[29,67,92,1],[30,2,92,1],[30,6,92,1,"_asyncToGenerator"],[30,23,92,1],[30,26,92,1,"_interopDefault"],[30,41,92,1],[30,42,92,1,"_babelRuntimeHelpersAsyncToGenerator"],[30,78,92,1],[31,2,1,0],[31,6,1,0,"_expoNotifications"],[31,24,1,0],[31,27,1,0,"require"],[31,34,1,0],[31,35,1,0,"_dependencyMap"],[31,49,1,0],[32,2,1,0],[32,6,1,0,"Notifications"],[32,19,1,0],[32,22,1,0,"_interopNamespace"],[32,39,1,0],[32,40,1,0,"_expoNotifications"],[32,58,1,0],[33,2,2,0],[33,6,2,0,"_expoDevice"],[33,17,2,0],[33,20,2,0,"require"],[33,27,2,0],[33,28,2,0,"_dependencyMap"],[33,42,2,0],[34,2,2,0],[34,6,2,0,"Device"],[34,12,2,0],[34,15,2,0,"_interopNamespace"],[34,32,2,0],[34,33,2,0,"_expoDevice"],[34,44,2,0],[35,2,3,0],[35,6,3,0,"_reactNative"],[35,18,3,0],[35,21,3,0,"require"],[35,28,3,0],[35,29,3,0,"_dependencyMap"],[35,43,3,0],[36,2,4,0],[36,6,4,0,"_api"],[36,10,4,0],[36,13,4,0,"require"],[36,20,4,0],[36,21,4,0,"_dependencyMap"],[36,35,4,0],[37,2,4,0],[37,6,4,0,"api"],[37,9,4,0],[37,12,4,0,"_interopDefault"],[37,27,4,0],[37,28,4,0,"_api"],[37,32,4,0],[38,2,6,0],[39,2,7,0,"Notifications"],[39,15,7,13],[39,16,7,14,"setNotificationHandler"],[39,38,7,36],[39,39,7,37],[40,4,8,2,"handleNotification"],[40,22,8,20],[41,6,8,20],[41,10,8,20,"_ref"],[41,14,8,20],[41,21,8,20,"_asyncToGenerator"],[41,38,8,20],[41,39,8,20,"default"],[41,46,8,20],[41,48,8,22],[42,8,8,22],[42,15,8,35],[43,10,9,4,"shouldShowAlert"],[43,25,9,19],[43,27,9,21],[43,31,9,25],[44,10,10,4,"shouldPlaySound"],[44,25,10,19],[44,27,10,21],[44,31,10,25],[45,10,11,4,"shouldSetBadge"],[45,24,11,18],[45,26,11,20],[46,8,12,2],[46,9,12,3],[47,6,12,3],[47,7,12,4],[48,6,12,4],[48,22,8,2,"handleNotification"],[48,40,8,20,"handleNotification"],[48,41,8,20],[49,8,8,20],[49,15,8,20,"_ref"],[49,19,8,20],[49,20,8,20,"apply"],[49,25,8,20],[49,32,8,20,"arguments"],[49,41,8,20],[50,6,8,20],[51,4,8,20],[52,2,13,0],[52,3,13,1],[52,4,13,2],[53,2,13,3],[53,11,15,22,"registerForPushNotificationsAsync"],[53,44,15,55,"registerForPushNotificationsAsync"],[53,45,15,55],[54,4,15,55],[54,11,15,55,"_registerForPushNotificationsAsync"],[54,45,15,55],[54,46,15,55,"apply"],[54,51,15,55],[54,58,15,55,"arguments"],[54,67,15,55],[55,2,15,55],[56,2,15,55],[56,11,15,55,"_registerForPushNotificationsAsync"],[56,46,15,55],[57,4,15,55,"_registerForPushNotificationsAsync"],[57,38,15,55],[57,45,15,55,"_asyncToGenerator"],[57,62,15,55],[57,63,15,55,"default"],[57,70,15,55],[57,72,15,7],[57,85,15,82],[58,6,16,2],[58,10,16,6,"token"],[58,15,16,11],[58,18,16,14],[58,22,16,18],[59,6,18,2],[59,10,18,6,"Platform"],[59,22,18,14],[59,23,18,14,"Platform"],[59,31,18,14],[59,32,18,15,"OS"],[59,34,18,17],[59,39,18,22],[59,44,18,27],[59,46,18,29],[60,8,19,4,"console"],[60,15,19,11],[60,16,19,12,"log"],[60,19,19,15],[60,20,19,16],[60,61,19,57],[60,62,19,58],[61,8,20,4],[61,15,20,11],[61,19,20,15],[62,6,21,2],[63,6,23,2],[63,10,23,6],[63,11,23,7,"Device"],[63,17,23,13],[63,18,23,14,"isDevice"],[63,26,23,22],[63,28,23,24],[64,8,24,4,"console"],[64,15,24,11],[64,16,24,12,"log"],[64,19,24,15],[64,20,24,16],[64,69,24,65],[64,70,24,66],[65,8,25,4],[65,15,25,11],[65,19,25,15],[66,6,26,2],[67,6,28,2],[67,10,28,6],[68,8,29,4],[68,12,29,4,"_yield$Notifications$"],[68,33,29,4],[68,42,29,45,"Notifications"],[68,55,29,58],[68,56,29,59,"getPermissionsAsync"],[68,75,29,78],[68,76,29,79],[68,77,29,80],[69,10,29,20,"existingStatus"],[69,24,29,34],[69,27,29,34,"_yield$Notifications$"],[69,48,29,34],[69,49,29,12,"status"],[69,55,29,18],[70,8,30,4],[70,12,30,8,"finalStatus"],[70,23,30,19],[70,26,30,22,"existingStatus"],[70,40,30,36],[71,8,32,4],[71,12,32,8,"existingStatus"],[71,26,32,22],[71,31,32,27],[71,40,32,36],[71,42,32,38],[72,10,33,6],[72,14,33,6,"_yield$Notifications$2"],[72,36,33,6],[72,45,33,31,"Notifications"],[72,58,33,44],[72,59,33,45,"requestPermissionsAsync"],[72,82,33,68],[72,83,33,69],[72,84,33,70],[73,12,33,14,"status"],[73,18,33,20],[73,21,33,20,"_yield$Notifications$2"],[73,43,33,20],[73,44,33,14,"status"],[73,50,33,20],[74,10,34,6,"finalStatus"],[74,21,34,17],[74,24,34,20,"status"],[74,30,34,26],[75,8,35,4],[76,8,37,4],[76,12,37,8,"finalStatus"],[76,23,37,19],[76,28,37,24],[76,37,37,33],[76,39,37,35],[77,10,38,6,"console"],[77,17,38,13],[77,18,38,14,"log"],[77,21,38,17],[77,22,38,18],[77,71,38,67],[77,72,38,68],[78,10,39,6],[78,17,39,13],[78,21,39,17],[79,8,40,4],[80,8,42,4,"token"],[80,13,42,9],[80,16,42,12],[80,23,42,19,"Notifications"],[80,36,42,32],[80,37,42,33,"getExpoPushTokenAsync"],[80,58,42,54],[80,59,42,55],[80,60,42,56],[80,62,42,58,"data"],[80,66,42,62],[81,8,43,4,"console"],[81,15,43,11],[81,16,43,12,"log"],[81,19,43,15],[81,20,43,16],[81,33,43,29],[81,35,43,31,"token"],[81,40,43,36],[81,41,43,37],[83,8,45,4],[84,8,46,4],[84,14,46,10,"api"],[84,17,46,13],[84,18,46,13,"default"],[84,25,46,13],[84,26,46,14,"post"],[84,30,46,18],[84,31,46,19],[84,58,46,46],[84,60,46,48],[84,64,46,52],[84,66,46,54],[85,10,47,6,"params"],[85,16,47,12],[85,18,47,14],[86,12,47,16,"push_token"],[86,22,47,26],[86,24,47,28,"token"],[87,10,47,34],[88,8,48,4],[88,9,48,5],[88,10,48,6],[89,8,49,4,"console"],[89,15,49,11],[89,16,49,12,"log"],[89,19,49,15],[89,20,49,16],[89,56,49,52],[89,57,49,53],[90,6,51,2],[90,7,51,3],[90,8,51,4],[90,15,51,11,"error"],[90,20,51,16],[90,22,51,18],[91,8,52,4,"console"],[91,15,52,11],[91,16,52,12,"error"],[91,21,52,17],[91,22,52,18],[91,65,52,61],[91,67,52,63,"error"],[91,72,52,68],[91,73,52,69],[92,6,53,2],[93,6,55,2],[93,10,55,6,"Platform"],[93,22,55,14],[93,23,55,14,"Platform"],[93,31,55,14],[93,32,55,15,"OS"],[93,34,55,17],[93,39,55,22],[93,48,55,31],[93,50,55,33],[94,8,56,4,"Notifications"],[94,21,56,17],[94,22,56,18,"setNotificationChannelAsync"],[94,49,56,45],[94,50,56,46],[94,59,56,55],[94,61,56,57],[95,10,57,6,"name"],[95,14,57,10],[95,16,57,12],[95,25,57,21],[96,10,58,6,"importance"],[96,20,58,16],[96,22,58,18,"Notifications"],[96,35,58,31],[96,36,58,32,"AndroidImportance"],[96,53,58,49],[96,54,58,50,"MAX"],[96,57,58,53],[97,10,59,6,"vibrationPattern"],[97,26,59,22],[97,28,59,24],[97,29,59,25],[97,30,59,26],[97,32,59,28],[97,35,59,31],[97,37,59,33],[97,40,59,36],[97,42,59,38],[97,45,59,41],[97,46,59,42],[98,10,60,6,"lightColor"],[98,20,60,16],[98,22,60,18],[99,8,61,4],[99,9,61,5],[99,10,61,6],[100,6,62,2],[101,6,64,2],[101,13,64,9,"token"],[101,18,64,14],[102,4,65,0],[102,5,65,1],[103,4,65,1],[103,11,65,1,"_registerForPushNotificationsAsync"],[103,45,65,1],[103,46,65,1,"apply"],[103,51,65,1],[103,58,65,1,"arguments"],[103,67,65,1],[104,2,65,1],[105,2,67,7],[105,11,67,16,"setupNotificationListeners"],[105,37,67,42,"setupNotificationListeners"],[105,38,67,42],[105,40,67,45],[106,4,68,2],[107,4,69,2],[107,8,69,8,"notificationListener"],[107,28,69,28],[107,31,69,31,"Notifications"],[107,44,69,44],[107,45,69,45,"addNotificationReceivedListener"],[107,76,69,76],[107,77,69,77,"notification"],[107,89,69,89],[107,93,69,93],[108,6,70,4,"console"],[108,13,70,11],[108,14,70,12,"log"],[108,17,70,15],[108,18,70,16],[108,42,70,40],[108,44,70,42,"notification"],[108,56,70,54],[108,57,70,55],[109,4,71,2],[109,5,71,3],[109,6,71,4],[111,4,73,2],[112,4,74,2],[112,8,74,8,"responseListener"],[112,24,74,24],[112,27,74,27,"Notifications"],[112,40,74,40],[112,41,74,41,"addNotificationResponseReceivedListener"],[112,80,74,80],[112,81,74,81,"response"],[112,89,74,89],[112,93,74,93],[113,6,75,4,"console"],[113,13,75,11],[113,14,75,12,"log"],[113,17,75,15],[113,18,75,16],[113,40,75,38],[113,42,75,40,"response"],[113,50,75,48],[113,51,75,49],[114,6,76,4],[114,10,76,10,"data"],[114,14,76,14],[114,17,76,17,"response"],[114,25,76,25],[114,26,76,26,"notification"],[114,38,76,38],[114,39,76,39,"request"],[114,46,76,46],[114,47,76,47,"content"],[114,54,76,54],[114,55,76,55,"data"],[114,59,76,59],[116,6,78,4],[117,6,79,4],[117,10,79,8,"data"],[117,14,79,12],[117,15,79,13,"type"],[117,19,79,17],[117,24,79,22],[117,35,79,33],[117,37,79,35],[118,8,80,6],[119,6,80,6],[119,7,81,5],[119,13,81,11],[119,17,81,15,"data"],[119,21,81,19],[119,22,81,20,"type"],[119,26,81,24],[119,31,81,29],[119,47,81,45],[119,49,81,47],[120,8,82,6],[121,6,82,6],[121,7,83,5],[121,13,83,11],[121,17,83,15,"data"],[121,21,83,19],[121,22,83,20,"type"],[121,26,83,24],[121,31,83,29],[121,44,83,42],[121,46,83,44],[122,8,84,6],[123,6,84,6],[124,4,86,2],[124,5,86,3],[124,6,86,4],[125,4,88,2],[125,11,88,9],[126,6,89,4,"notificationListener"],[126,26,89,24],[127,6,90,4,"responseListener"],[128,4,91,2],[128,5,91,3],[129,2,92,0],[130,0,92,1],[130,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","registerForPushNotificationsAsync","setupNotificationListeners","Notifications.addNotificationReceivedListener$argument_0","Notifications.addNotificationResponseReceivedListener$argument_0"],"mappings":"AAA;sBCO;IDI;OEG;CFkD;OGE;6ECE;GDE;iFEG;GFY;CHM"},"hasCjsExports":false},"type":"js/module"}]}